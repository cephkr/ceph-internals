<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ceph-doxygen: BlueFS Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ceph-doxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classBlueFS-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">BlueFS Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for BlueFS:</div>
<div class="dyncontent">
<div class="center"><img src="classBlueFS__coll__graph.png" border="0" usemap="#aBlueFS_coll__map" alt="Collaboration graph"/></div>
<map name="aBlueFS_coll__map" id="aBlueFS_coll__map">
<area shape="rect" title=" " alt="" coords="126,95,193,121"/>
<area shape="rect" href="structBlueFS_1_1FileWriter.html" title=" " alt="" coords="5,5,143,32"/>
<area shape="rect" href="structbluefs__transaction__t.html" title=" " alt="" coords="167,5,322,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueFS_1_1Dir.html">Dir</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueFS_1_1File.html">File</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueFS_1_1FileLock.html">FileLock</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueFS_1_1FileReader.html">FileReader</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueFS_1_1FileReaderBuffer.html">FileReaderBuffer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueFS_1_1FileWriter.html">FileWriter</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlueFS_1_1SocketHook.html">SocketHook</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a8128d07c6ce7fe5b0e233e9eefeeb1a5"><td class="memItemLeft" align="right" valign="top"><a id="a8128d07c6ce7fe5b0e233e9eefeeb1a5"></a>enum &#160;</td><td class="memItemRight" valign="bottom">{ <b>WRITER_UNKNOWN</b>
, <b>WRITER_WAL</b>
, <b>WRITER_SST</b>
 }</td></tr>
<tr class="separator:a8128d07c6ce7fe5b0e233e9eefeeb1a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac43e8f2af26c5d7982ccb52defc6e8e9"><td class="memItemLeft" align="right" valign="top"><a id="ac43e8f2af26c5d7982ccb52defc6e8e9"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>FileRef</b> = ceph::ref_t&lt; <a class="el" href="structBlueFS_1_1File.html">File</a> &gt;</td></tr>
<tr class="separator:ac43e8f2af26c5d7982ccb52defc6e8e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25940008f95b3528c3d2b6a8e62a28c0"><td class="memItemLeft" align="right" valign="top"><a id="a25940008f95b3528c3d2b6a8e62a28c0"></a>
typedef boost::intrusive::list&lt; <a class="el" href="structBlueFS_1_1File.html">File</a>, boost::intrusive::member_hook&lt; <a class="el" href="structBlueFS_1_1File.html">File</a>, boost::intrusive::list_member_hook&lt;&gt;, &amp;File::dirty_item &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>dirty_file_list_t</b></td></tr>
<tr class="separator:a25940008f95b3528c3d2b6a8e62a28c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7735dc7d81b086bf920869ea5695610c"><td class="memItemLeft" align="right" valign="top"><a id="a7735dc7d81b086bf920869ea5695610c"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>DirRef</b> = ceph::ref_t&lt; <a class="el" href="structBlueFS_1_1Dir.html">Dir</a> &gt;</td></tr>
<tr class="separator:a7735dc7d81b086bf920869ea5695610c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a577be8f5967768d4e0382474da45f56e"><td class="memItemLeft" align="right" valign="top"><a id="a577be8f5967768d4e0382474da45f56e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>BlueFS</b> (CephContext *cct)</td></tr>
<tr class="separator:a577be8f5967768d4e0382474da45f56e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cadefa0fc592bae4c6134dfd4643219"><td class="memItemLeft" align="right" valign="top"><a id="a8cadefa0fc592bae4c6134dfd4643219"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>mkfs</b> (uuid_d osd_uuid, const <a class="el" href="structbluefs__layout__t.html">bluefs_layout_t</a> &amp;layout)</td></tr>
<tr class="separator:a8cadefa0fc592bae4c6134dfd4643219"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a431f273aead2913a8a20027f389c626d"><td class="memItemLeft" align="right" valign="top"><a id="a431f273aead2913a8a20027f389c626d"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>mount</b> ()</td></tr>
<tr class="separator:a431f273aead2913a8a20027f389c626d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8cf1db42afce56f4cc1d2e3e8759a21"><td class="memItemLeft" align="right" valign="top"><a id="af8cf1db42afce56f4cc1d2e3e8759a21"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>maybe_verify_layout</b> (const <a class="el" href="structbluefs__layout__t.html">bluefs_layout_t</a> &amp;layout) const</td></tr>
<tr class="separator:af8cf1db42afce56f4cc1d2e3e8759a21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a116bc7d846908d2b2bf0ce1ef376e2c7"><td class="memItemLeft" align="right" valign="top"><a id="a116bc7d846908d2b2bf0ce1ef376e2c7"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>umount</b> (bool avoid_compact=false)</td></tr>
<tr class="separator:a116bc7d846908d2b2bf0ce1ef376e2c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bfd787b355955060e1e2dd78e931f85"><td class="memItemLeft" align="right" valign="top"><a id="a1bfd787b355955060e1e2dd78e931f85"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>prepare_new_device</b> (int id, const <a class="el" href="structbluefs__layout__t.html">bluefs_layout_t</a> &amp;layout)</td></tr>
<tr class="separator:a1bfd787b355955060e1e2dd78e931f85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d32ae6f4b25b77e6d887979409a56e5"><td class="memItemLeft" align="right" valign="top"><a id="a5d32ae6f4b25b77e6d887979409a56e5"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>log_dump</b> ()</td></tr>
<tr class="separator:a5d32ae6f4b25b77e6d887979409a56e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acced26bc25e936e2faac2a102e4e6e7d"><td class="memItemLeft" align="right" valign="top"><a id="acced26bc25e936e2faac2a102e4e6e7d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>collect_metadata</b> (std::map&lt; std::string, std::string &gt; *pm, unsigned skip_bdev_id)</td></tr>
<tr class="separator:acced26bc25e936e2faac2a102e4e6e7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c0b2ac3eadf5cb7db250da20f02b561"><td class="memItemLeft" align="right" valign="top"><a id="a8c0b2ac3eadf5cb7db250da20f02b561"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>get_devices</b> (std::set&lt; std::string &gt; *ls)</td></tr>
<tr class="separator:a8c0b2ac3eadf5cb7db250da20f02b561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b78c5062839b6de2ca13fb9ba0c3b40"><td class="memItemLeft" align="right" valign="top"><a id="a9b78c5062839b6de2ca13fb9ba0c3b40"></a>
uint64_t&#160;</td><td class="memItemRight" valign="bottom"><b>get_alloc_size</b> (int id)</td></tr>
<tr class="separator:a9b78c5062839b6de2ca13fb9ba0c3b40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62acb24d1585084b0a788227cc6e11eb"><td class="memItemLeft" align="right" valign="top"><a id="a62acb24d1585084b0a788227cc6e11eb"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>fsck</b> ()</td></tr>
<tr class="separator:a62acb24d1585084b0a788227cc6e11eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35be81e7d924940222f3d83b4ebd5007"><td class="memItemLeft" align="right" valign="top"><a id="a35be81e7d924940222f3d83b4ebd5007"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>device_migrate_to_new</b> (CephContext *cct, const std::set&lt; int &gt; &amp;devs_source, int dev_target, const <a class="el" href="structbluefs__layout__t.html">bluefs_layout_t</a> &amp;layout)</td></tr>
<tr class="separator:a35be81e7d924940222f3d83b4ebd5007"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3258d41b7dd81a837bd5703449a8467f"><td class="memItemLeft" align="right" valign="top"><a id="a3258d41b7dd81a837bd5703449a8467f"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>device_migrate_to_existing</b> (CephContext *cct, const std::set&lt; int &gt; &amp;devs_source, int dev_target, const <a class="el" href="structbluefs__layout__t.html">bluefs_layout_t</a> &amp;layout)</td></tr>
<tr class="separator:a3258d41b7dd81a837bd5703449a8467f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5c2097968bfef6ce9a320c78c89c22f"><td class="memItemLeft" align="right" valign="top"><a id="ad5c2097968bfef6ce9a320c78c89c22f"></a>
uint64_t&#160;</td><td class="memItemRight" valign="bottom"><b>get_used</b> ()</td></tr>
<tr class="separator:ad5c2097968bfef6ce9a320c78c89c22f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7371f6d68262e9d77c387b7dc4b08ac9"><td class="memItemLeft" align="right" valign="top"><a id="a7371f6d68262e9d77c387b7dc4b08ac9"></a>
uint64_t&#160;</td><td class="memItemRight" valign="bottom"><b>get_total</b> (unsigned id)</td></tr>
<tr class="separator:a7371f6d68262e9d77c387b7dc4b08ac9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe99d2b65423a6cfa5a1955b28083c79"><td class="memItemLeft" align="right" valign="top"><a id="abe99d2b65423a6cfa5a1955b28083c79"></a>
uint64_t&#160;</td><td class="memItemRight" valign="bottom"><b>get_free</b> (unsigned id)</td></tr>
<tr class="separator:abe99d2b65423a6cfa5a1955b28083c79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab36dfe8806d5837a91fc7a28a3ab5880"><td class="memItemLeft" align="right" valign="top"><a id="ab36dfe8806d5837a91fc7a28a3ab5880"></a>
uint64_t&#160;</td><td class="memItemRight" valign="bottom"><b>get_used</b> (unsigned id)</td></tr>
<tr class="separator:ab36dfe8806d5837a91fc7a28a3ab5880"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab8cb6eb143345e1f4dfba43718693ed"><td class="memItemLeft" align="right" valign="top"><a id="aab8cb6eb143345e1f4dfba43718693ed"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>dump_perf_counters</b> (ceph::Formatter *f)</td></tr>
<tr class="separator:aab8cb6eb143345e1f4dfba43718693ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a389a5bfdfba9f544f3ad906c612c5c96"><td class="memItemLeft" align="right" valign="top"><a id="a389a5bfdfba9f544f3ad906c612c5c96"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>dump_block_extents</b> (std::ostream &amp;out)</td></tr>
<tr class="separator:a389a5bfdfba9f544f3ad906c612c5c96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32ced7fcd6241a31cdfe52452d2040b5"><td class="memItemLeft" align="right" valign="top"><a id="a32ced7fcd6241a31cdfe52452d2040b5"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlueFS.html#a32ced7fcd6241a31cdfe52452d2040b5">foreach_block_extents</a> (unsigned id, std::function&lt; void(uint64_t, uint32_t)&gt; cb)</td></tr>
<tr class="memdesc:a32ced7fcd6241a31cdfe52452d2040b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">get current extents that we own for given block device <br /></td></tr>
<tr class="separator:a32ced7fcd6241a31cdfe52452d2040b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cb1088b491d7b643c6ba4bdf93cccec"><td class="memItemLeft" align="right" valign="top"><a id="a3cb1088b491d7b643c6ba4bdf93cccec"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>open_for_write</b> (std::string_view dir, std::string_view file, <a class="el" href="structBlueFS_1_1FileWriter.html">FileWriter</a> **h, bool overwrite)</td></tr>
<tr class="separator:a3cb1088b491d7b643c6ba4bdf93cccec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acebda72ee9dfb2661fdb72ef0fde2565"><td class="memItemLeft" align="right" valign="top"><a id="acebda72ee9dfb2661fdb72ef0fde2565"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>open_for_read</b> (std::string_view dir, std::string_view file, <a class="el" href="structBlueFS_1_1FileReader.html">FileReader</a> **h, bool random=false)</td></tr>
<tr class="separator:acebda72ee9dfb2661fdb72ef0fde2565"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a979a25ae65dd0a4231ada63724318c5a"><td class="memItemLeft" align="right" valign="top"><a id="a979a25ae65dd0a4231ada63724318c5a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>close_writer</b> (<a class="el" href="structBlueFS_1_1FileWriter.html">FileWriter</a> *h)</td></tr>
<tr class="separator:a979a25ae65dd0a4231ada63724318c5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d157644ae77195d266b8451249b4e32"><td class="memItemLeft" align="right" valign="top"><a id="a4d157644ae77195d266b8451249b4e32"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>rename</b> (std::string_view old_dir, std::string_view old_file, std::string_view new_dir, std::string_view new_file)</td></tr>
<tr class="separator:a4d157644ae77195d266b8451249b4e32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab216dbbab087822331d0e8dd2e099a53"><td class="memItemLeft" align="right" valign="top"><a id="ab216dbbab087822331d0e8dd2e099a53"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>readdir</b> (std::string_view dirname, std::vector&lt; std::string &gt; *ls)</td></tr>
<tr class="separator:ab216dbbab087822331d0e8dd2e099a53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1b9003da553fb393437971fb07ef0c4"><td class="memItemLeft" align="right" valign="top"><a id="ad1b9003da553fb393437971fb07ef0c4"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>unlink</b> (std::string_view dirname, std::string_view filename)</td></tr>
<tr class="separator:ad1b9003da553fb393437971fb07ef0c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3566067949d65a7fcc0c8060efb4c620"><td class="memItemLeft" align="right" valign="top"><a id="a3566067949d65a7fcc0c8060efb4c620"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>mkdir</b> (std::string_view dirname)</td></tr>
<tr class="separator:a3566067949d65a7fcc0c8060efb4c620"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05539f50934efb28aa4c04098cd683f3"><td class="memItemLeft" align="right" valign="top"><a id="a05539f50934efb28aa4c04098cd683f3"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>rmdir</b> (std::string_view dirname)</td></tr>
<tr class="separator:a05539f50934efb28aa4c04098cd683f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e43087fb0b19b167bacb544ba84b817"><td class="memItemLeft" align="right" valign="top"><a id="a0e43087fb0b19b167bacb544ba84b817"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>wal_is_rotational</b> ()</td></tr>
<tr class="separator:a0e43087fb0b19b167bacb544ba84b817"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ad48bbc585e9e083dd2e766b4037be9"><td class="memItemLeft" align="right" valign="top"><a id="a3ad48bbc585e9e083dd2e766b4037be9"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>db_is_rotational</b> ()</td></tr>
<tr class="separator:a3ad48bbc585e9e083dd2e766b4037be9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa0317dcab99ea9bf34a76cd6a2f41ed"><td class="memItemLeft" align="right" valign="top"><a id="afa0317dcab99ea9bf34a76cd6a2f41ed"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>dir_exists</b> (std::string_view dirname)</td></tr>
<tr class="separator:afa0317dcab99ea9bf34a76cd6a2f41ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa49a38e12f60b88c0f83179100551d41"><td class="memItemLeft" align="right" valign="top"><a id="aa49a38e12f60b88c0f83179100551d41"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>stat</b> (std::string_view dirname, std::string_view filename, uint64_t *size, utime_t *mtime)</td></tr>
<tr class="separator:aa49a38e12f60b88c0f83179100551d41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35f78c909e63f0085debfa0922a81953"><td class="memItemLeft" align="right" valign="top"><a id="a35f78c909e63f0085debfa0922a81953"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>lock_file</b> (std::string_view dirname, std::string_view filename, <a class="el" href="structBlueFS_1_1FileLock.html">FileLock</a> **p)</td></tr>
<tr class="separator:a35f78c909e63f0085debfa0922a81953"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86e140f62206cfd6d15ff42e3963fa5c"><td class="memItemLeft" align="right" valign="top"><a id="a86e140f62206cfd6d15ff42e3963fa5c"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>unlock_file</b> (<a class="el" href="structBlueFS_1_1FileLock.html">FileLock</a> *l)</td></tr>
<tr class="separator:a86e140f62206cfd6d15ff42e3963fa5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dd2273797a63aa0451645d9ffe4fd6f"><td class="memItemLeft" align="right" valign="top"><a id="a0dd2273797a63aa0451645d9ffe4fd6f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>compact_log</b> ()</td></tr>
<tr class="separator:a0dd2273797a63aa0451645d9ffe4fd6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5792d7fd356d00cd91fc9d7318e54040"><td class="memItemLeft" align="right" valign="top"><a id="a5792d7fd356d00cd91fc9d7318e54040"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlueFS.html#a5792d7fd356d00cd91fc9d7318e54040">sync_metadata</a> (bool avoid_compact)</td></tr>
<tr class="memdesc:a5792d7fd356d00cd91fc9d7318e54040"><td class="mdescLeft">&#160;</td><td class="mdescRight">sync any uncommitted state to disk <br /></td></tr>
<tr class="separator:a5792d7fd356d00cd91fc9d7318e54040"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a767bdda2b6b09e43a605f33f365b9f8a"><td class="memItemLeft" align="right" valign="top"><a id="a767bdda2b6b09e43a605f33f365b9f8a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_volume_selector</b> (<a class="el" href="classBlueFSVolumeSelector.html">BlueFSVolumeSelector</a> *s)</td></tr>
<tr class="separator:a767bdda2b6b09e43a605f33f365b9f8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9c33b2e406c81dce9d6d887ebb6afdc"><td class="memItemLeft" align="right" valign="top"><a id="ae9c33b2e406c81dce9d6d887ebb6afdc"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>dump_volume_selector</b> (std::ostream &amp;sout)</td></tr>
<tr class="separator:ae9c33b2e406c81dce9d6d887ebb6afdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c2483a14ce2de6d7ad53054eb205f9b"><td class="memItemLeft" align="right" valign="top"><a id="a0c2483a14ce2de6d7ad53054eb205f9b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>get_vselector_paths</b> (const std::string &amp;base, BlueFSVolumeSelector::paths &amp;res) const</td></tr>
<tr class="separator:a0c2483a14ce2de6d7ad53054eb205f9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a756971cef5d50fd2341642e982de43e6"><td class="memItemLeft" align="right" valign="top"><a id="a756971cef5d50fd2341642e982de43e6"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>add_block_device</b> (unsigned bdev, const std::string &amp;path, bool trim, <a class="el" href="structbluefs__shared__alloc__context__t.html">bluefs_shared_alloc_context_t</a> *_shared_alloc=nullptr)</td></tr>
<tr class="separator:a756971cef5d50fd2341642e982de43e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac829699eb0dd4a61c0ed53f58e78e2a1"><td class="memItemLeft" align="right" valign="top"><a id="ac829699eb0dd4a61c0ed53f58e78e2a1"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>bdev_support_label</b> (unsigned id)</td></tr>
<tr class="separator:ac829699eb0dd4a61c0ed53f58e78e2a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cc7464a8594266efbd572569e924557"><td class="memItemLeft" align="right" valign="top"><a id="a3cc7464a8594266efbd572569e924557"></a>
uint64_t&#160;</td><td class="memItemRight" valign="bottom"><b>get_block_device_size</b> (unsigned bdev) const</td></tr>
<tr class="separator:a3cc7464a8594266efbd572569e924557"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6876d7d38506b336a35bf61788e3e681"><td class="memItemLeft" align="right" valign="top"><a id="a6876d7d38506b336a35bf61788e3e681"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>handle_discard</b> (unsigned dev, interval_set&lt; uint64_t &gt; &amp;to_release)</td></tr>
<tr class="separator:a6876d7d38506b336a35bf61788e3e681"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40a31f895a122b2d35522ba694361521"><td class="memItemLeft" align="right" valign="top"><a id="a40a31f895a122b2d35522ba694361521"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>flush</b> (<a class="el" href="structBlueFS_1_1FileWriter.html">FileWriter</a> *h, bool force=false)</td></tr>
<tr class="separator:a40a31f895a122b2d35522ba694361521"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0eefee44952a899edbf543aa609f0a70"><td class="memItemLeft" align="right" valign="top"><a id="a0eefee44952a899edbf543aa609f0a70"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>append_try_flush</b> (<a class="el" href="structBlueFS_1_1FileWriter.html">FileWriter</a> *h, const char *buf, size_t len)</td></tr>
<tr class="separator:a0eefee44952a899edbf543aa609f0a70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab070c8803727bc3cb3140c25d6c5ae96"><td class="memItemLeft" align="right" valign="top"><a id="ab070c8803727bc3cb3140c25d6c5ae96"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>flush_range</b> (<a class="el" href="structBlueFS_1_1FileWriter.html">FileWriter</a> *h, uint64_t offset, uint64_t length)</td></tr>
<tr class="separator:ab070c8803727bc3cb3140c25d6c5ae96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad98c2f8c38eaa6640006559766e624dd"><td class="memItemLeft" align="right" valign="top"><a id="ad98c2f8c38eaa6640006559766e624dd"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>fsync</b> (<a class="el" href="structBlueFS_1_1FileWriter.html">FileWriter</a> *h)</td></tr>
<tr class="separator:ad98c2f8c38eaa6640006559766e624dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1867b1c4cb19f813e4fded1719e3068f"><td class="memItemLeft" align="right" valign="top"><a id="a1867b1c4cb19f813e4fded1719e3068f"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>read</b> (<a class="el" href="structBlueFS_1_1FileReader.html">FileReader</a> *h, uint64_t offset, size_t len, ceph::buffer::list *outbl, char *out)</td></tr>
<tr class="separator:a1867b1c4cb19f813e4fded1719e3068f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedf1f1cc22ce4e06e8be4dd20f19c034"><td class="memItemLeft" align="right" valign="top"><a id="aedf1f1cc22ce4e06e8be4dd20f19c034"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>read_random</b> (<a class="el" href="structBlueFS_1_1FileReader.html">FileReader</a> *h, uint64_t offset, size_t len, char *out)</td></tr>
<tr class="separator:aedf1f1cc22ce4e06e8be4dd20f19c034"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c0618cdb70b7fb48bc43e901f32d249"><td class="memItemLeft" align="right" valign="top"><a id="a5c0618cdb70b7fb48bc43e901f32d249"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>invalidate_cache</b> (FileRef f, uint64_t offset, uint64_t len)</td></tr>
<tr class="separator:a5c0618cdb70b7fb48bc43e901f32d249"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36b2caf6616d48f7c88665608a9d56bd"><td class="memItemLeft" align="right" valign="top"><a id="a36b2caf6616d48f7c88665608a9d56bd"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>preallocate</b> (FileRef f, uint64_t offset, uint64_t len)</td></tr>
<tr class="separator:a36b2caf6616d48f7c88665608a9d56bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c438d174531be598b87fa9f6c2cfa18"><td class="memItemLeft" align="right" valign="top"><a id="a5c438d174531be598b87fa9f6c2cfa18"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>truncate</b> (<a class="el" href="structBlueFS_1_1FileWriter.html">FileWriter</a> *h, uint64_t offset)</td></tr>
<tr class="separator:a5c438d174531be598b87fa9f6c2cfa18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88c57e30382878261fffe8ba11be9b6f"><td class="memItemLeft" align="right" valign="top"><a id="a88c57e30382878261fffe8ba11be9b6f"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><b>probe_alloc_avail</b> (int dev, uint64_t alloc_size)</td></tr>
<tr class="separator:a88c57e30382878261fffe8ba11be9b6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a684e8142e86d05d9ea606f422b64b84d"><td class="memItemLeft" align="right" valign="top"><a id="a684e8142e86d05d9ea606f422b64b84d"></a>
const PerfCounters *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlueFS.html#a684e8142e86d05d9ea606f422b64b84d">get_perf_counters</a> () const</td></tr>
<tr class="memdesc:a684e8142e86d05d9ea606f422b64b84d"><td class="mdescLeft">&#160;</td><td class="mdescRight">test purpose methods <br /></td></tr>
<tr class="separator:a684e8142e86d05d9ea606f422b64b84d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19343ee037fe50d072d37c4d0c0752fe"><td class="memItemLeft" align="right" valign="top"><a id="a19343ee037fe50d072d37c4d0c0752fe"></a>
uint64_t&#160;</td><td class="memItemRight" valign="bottom"><b>debug_get_dirty_seq</b> (<a class="el" href="structBlueFS_1_1FileWriter.html">FileWriter</a> *h)</td></tr>
<tr class="separator:a19343ee037fe50d072d37c4d0c0752fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c1d7158e55f85e08a65d8779a8883dc"><td class="memItemLeft" align="right" valign="top"><a id="a7c1d7158e55f85e08a65d8779a8883dc"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>debug_get_is_dev_dirty</b> (<a class="el" href="structBlueFS_1_1FileWriter.html">FileWriter</a> *h, uint8_t dev)</td></tr>
<tr class="separator:a7c1d7158e55f85e08a65d8779a8883dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a15867ed23225a615bf9cf50709696493"><td class="memItemLeft" align="right" valign="top"><a id="a15867ed23225a615bf9cf50709696493"></a>
CephContext *&#160;</td><td class="memItemRight" valign="bottom"><b>cct</b></td></tr>
<tr class="separator:a15867ed23225a615bf9cf50709696493"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3d4c7e723b3a0b63a94c5f11a393448"><td class="memItemLeft" align="right" valign="top"><a id="ae3d4c7e723b3a0b63a94c5f11a393448"></a>
ceph::mutex&#160;</td><td class="memItemRight" valign="bottom"><b>lock</b> = ceph::make_mutex(&quot;BlueFS::nodes.lock&quot;)</td></tr>
<tr class="separator:ae3d4c7e723b3a0b63a94c5f11a393448"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbd18e0551e09c6fc7e0c8d6394d686f"><td class="memItemLeft" align="right" valign="top"><a id="adbd18e0551e09c6fc7e0c8d6394d686f"></a>
mempool::bluefs::map&lt; std::string, DirRef, std::less&lt;&gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlueFS.html#adbd18e0551e09c6fc7e0c8d6394d686f">dir_map</a></td></tr>
<tr class="memdesc:adbd18e0551e09c6fc7e0c8d6394d686f"><td class="mdescLeft">&#160;</td><td class="mdescRight">dirname -&gt; <a class="el" href="structBlueFS_1_1Dir.html">Dir</a> <br /></td></tr>
<tr class="separator:adbd18e0551e09c6fc7e0c8d6394d686f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01c03cbfed74689d2bb5dade627dacad"><td class="memItemLeft" align="right" valign="top"><a id="a01c03cbfed74689d2bb5dade627dacad"></a>
mempool::bluefs::unordered_map&lt; uint64_t, FileRef &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlueFS.html#a01c03cbfed74689d2bb5dade627dacad">file_map</a></td></tr>
<tr class="memdesc:a01c03cbfed74689d2bb5dade627dacad"><td class="mdescLeft">&#160;</td><td class="mdescRight">ino -&gt; <a class="el" href="structBlueFS_1_1File.html">File</a> <br /></td></tr>
<tr class="separator:a01c03cbfed74689d2bb5dade627dacad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04f669086f39e90953dbaaf859f19296"><td class="memItemLeft" align="right" valign="top"><a id="a04f669086f39e90953dbaaf859f19296"></a>
uint64_t&#160;</td><td class="memItemRight" valign="bottom"><b>seq_live</b> = 1</td></tr>
<tr class="separator:a04f669086f39e90953dbaaf859f19296"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a819b447484327ce034f8d25a2b3e33f5"><td class="memItemLeft" align="right" valign="top"><a id="a819b447484327ce034f8d25a2b3e33f5"></a>
<a class="el" href="structBlueFS_1_1FileWriter.html">FileWriter</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>writer</b> = 0</td></tr>
<tr class="separator:a819b447484327ce034f8d25a2b3e33f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49049834eaa931c76e3112ad3be1909c"><td class="memItemLeft" align="right" valign="top"><a id="a49049834eaa931c76e3112ad3be1909c"></a>
<a class="el" href="structbluefs__transaction__t.html">bluefs_transaction_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>t</b></td></tr>
<tr class="separator:a49049834eaa931c76e3112ad3be1909c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb481f93ee03d2bdd3d544d6fdcc218a"><td class="memItemLeft" align="right" valign="top"><a id="abb481f93ee03d2bdd3d544d6fdcc218a"></a>
uint64_t&#160;</td><td class="memItemRight" valign="bottom"><b>seq_stable</b> = 0</td></tr>
<tr class="separator:abb481f93ee03d2bdd3d544d6fdcc218a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9c8c66a618c043749e3d6bb902cd41d"><td class="memItemLeft" align="right" valign="top"><a id="ac9c8c66a618c043749e3d6bb902cd41d"></a>
std::map&lt; uint64_t, dirty_file_list_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>files</b></td></tr>
<tr class="separator:ac9c8c66a618c043749e3d6bb902cd41d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee40a8f6c58771e5bee81f9c1848be76"><td class="memItemLeft" align="right" valign="top"><a id="aee40a8f6c58771e5bee81f9c1848be76"></a>
std::vector&lt; interval_set&lt; uint64_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlueFS.html#aee40a8f6c58771e5bee81f9c1848be76">pending_release</a></td></tr>
<tr class="memdesc:aee40a8f6c58771e5bee81f9c1848be76"><td class="mdescLeft">&#160;</td><td class="mdescRight">extents to release <br /></td></tr>
<tr class="separator:aee40a8f6c58771e5bee81f9c1848be76"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:ad2a67248a5cdf67753d35482bd5c282e"><td class="memItemLeft" align="right" valign="top"><a id="ad2a67248a5cdf67753d35482bd5c282e"></a>
static constexpr unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_BDEV</b> = 5</td></tr>
<tr class="separator:ad2a67248a5cdf67753d35482bd5c282e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a808a3df106c47ca8376a041236f13530"><td class="memItemLeft" align="right" valign="top"><a id="a808a3df106c47ca8376a041236f13530"></a>
static constexpr unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>BDEV_WAL</b> = 0</td></tr>
<tr class="separator:a808a3df106c47ca8376a041236f13530"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad681441dd0102360be5d553a4866e279"><td class="memItemLeft" align="right" valign="top"><a id="ad681441dd0102360be5d553a4866e279"></a>
static constexpr unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>BDEV_DB</b> = 1</td></tr>
<tr class="separator:ad681441dd0102360be5d553a4866e279"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac866899540369d93ec10052f2d7c96e3"><td class="memItemLeft" align="right" valign="top"><a id="ac866899540369d93ec10052f2d7c96e3"></a>
static constexpr unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>BDEV_SLOW</b> = 2</td></tr>
<tr class="separator:ac866899540369d93ec10052f2d7c96e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0a06e28785a3ede9ce61253e58fd798"><td class="memItemLeft" align="right" valign="top"><a id="ab0a06e28785a3ede9ce61253e58fd798"></a>
static constexpr unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>BDEV_NEWWAL</b> = 3</td></tr>
<tr class="separator:ab0a06e28785a3ede9ce61253e58fd798"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2899beb63c016258fb99561b54ab68cf"><td class="memItemLeft" align="right" valign="top"><a id="a2899beb63c016258fb99561b54ab68cf"></a>
static constexpr unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>BDEV_NEWDB</b> = 4</td></tr>
<tr class="separator:a2899beb63c016258fb99561b54ab68cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="BlueFS_8h_source.html#l00126">126</a> of file <a class="el" href="BlueFS_8h_source.html">BlueFS.h</a>.</p>
</div><hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="BlueFS_8h_source.html">BlueFS.h</a></li>
<li><a class="el" href="BlueFS_8cc_source.html">BlueFS.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
