<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ceph-doxygen: BlueStore Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ceph-doxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classBlueStore-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">BlueStore Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for BlueStore:</div>
<div class="dyncontent">
<div class="center"><img src="classBlueStore__inherit__graph.png" border="0" usemap="#aBlueStore_inherit__map" alt="Inheritance graph"/></div>
<map name="aBlueStore_inherit__map" id="aBlueStore_inherit__map">
<area shape="rect" title=" " alt="" coords="81,80,167,107"/>
<area shape="rect" title=" " alt="" coords="5,5,104,32"/>
<area shape="rect" title=" " alt="" coords="128,5,259,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for BlueStore:</div>
<div class="dyncontent">
<div class="center"><img src="classBlueStore__coll__graph.png" border="0" usemap="#aBlueStore_coll__map" alt="Collaboration graph"/></div>
<map name="aBlueStore_coll__map" id="aBlueStore_coll__map">
<area shape="rect" title=" " alt="" coords="241,95,327,121"/>
<area shape="rect" title=" " alt="" coords="5,5,104,32"/>
<area shape="rect" title=" " alt="" coords="128,5,259,32"/>
<area shape="rect" href="structBlueStore_1_1BSPerfTracker.html" title=" " alt="" coords="283,5,466,32"/>
<area shape="rect" href="classBlueStore_1_1BlueStoreThrottle.html" title=" " alt="" coords="490,5,697,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueStore_1_1AioContext.html">AioContext</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueStore_1_1BigDeferredWriteContext.html">BigDeferredWriteContext</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueStore_1_1Blob.html">Blob</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">in-memory blob metadata and associated cached buffers (if any)  <a href="structBlueStore_1_1Blob.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlueStore_1_1BlueStoreThrottle.html">BlueStoreThrottle</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueStore_1_1BSPerfTracker.html">BSPerfTracker</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueStore_1_1Buffer.html">Buffer</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">cached buffer  <a href="structBlueStore_1_1Buffer.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueStore_1_1BufferCacheShard.html">BufferCacheShard</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A Generic buffer Cache Shard.  <a href="structBlueStore_1_1BufferCacheShard.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueStore_1_1BufferSpace.html">BufferSpace</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">map logical extent range (object) onto buffers  <a href="structBlueStore_1_1BufferSpace.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueStore_1_1CacheShard.html">CacheShard</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A generic Cache Shard.  <a href="structBlueStore_1_1CacheShard.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueStore_1_1Collection.html">Collection</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueStore_1_1DeferredBatch.html">DeferredBatch</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueStore_1_1Extent.html">Extent</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueStore_1_1ExtentMap.html">ExtentMap</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">a sharded extent map, mapping offsets to lextents to blobs  <a href="structBlueStore_1_1ExtentMap.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueStore_1_1FSCK__ObjectCtx.html">FSCK_ObjectCtx</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlueStore_1_1GarbageCollector.html">GarbageCollector</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compressed <a class="el" href="structBlueStore_1_1Blob.html" title="in-memory blob metadata and associated cached buffers (if any)">Blob</a> Garbage collector.  <a href="classBlueStore_1_1GarbageCollector.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueStore_1_1KVFinalizeThread.html">KVFinalizeThread</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueStore_1_1KVSyncThread.html">KVSyncThread</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueStore_1_1OldExtent.html">OldExtent</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlueStore_1_1OmapIteratorImpl.html">OmapIteratorImpl</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueStore_1_1Onode.html">Onode</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">an in-memory object  <a href="structBlueStore_1_1Onode.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueStore_1_1OnodeCacheShard.html">OnodeCacheShard</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A Generic onode Cache Shard.  <a href="structBlueStore_1_1OnodeCacheShard.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueStore_1_1OnodeSpace.html">OnodeSpace</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlueStore_1_1OpSequencer.html">OpSequencer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueStore_1_1SharedBlob.html">SharedBlob</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">in-memory shared blob state (incl cached buffers)  <a href="structBlueStore_1_1SharedBlob.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueStore_1_1SharedBlobSet.html">SharedBlobSet</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">a lookup table of SharedBlobs  <a href="structBlueStore_1_1SharedBlobSet.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueStore_1_1TransContext.html">TransContext</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBlueStore_1_1volatile__statfs.html">volatile_statfs</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a15c6ce6811815cf4184911ee10f68054"><td class="memItemLeft" align="right" valign="top"><a id="a15c6ce6811815cf4184911ee10f68054"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>FSCKDepth</b> { <b>FSCK_REGULAR</b>
, <b>FSCK_DEEP</b>
, <b>FSCK_SHALLOW</b>
 }</td></tr>
<tr class="separator:a15c6ce6811815cf4184911ee10f68054"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a65b91047fc992aed9a4799bdc8b319"><td class="memItemLeft" align="right" valign="top"><a id="a1a65b91047fc992aed9a4799bdc8b319"></a>enum &#160;</td><td class="memItemRight" valign="bottom">{ <b>MAX_FSCK_ERROR_LINES</b> = 100
 }</td></tr>
<tr class="separator:a1a65b91047fc992aed9a4799bdc8b319"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7645063c3f94a78cb382a885d2da175f"><td class="memItemLeft" align="right" valign="top"><a id="a7645063c3f94a78cb382a885d2da175f"></a>
typedef std::map&lt; uint64_t, ceph::buffer::list &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>ready_regions_t</b></td></tr>
<tr class="separator:a7645063c3f94a78cb382a885d2da175f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c7223a3db8fb880e7b7cdc5b229011b"><td class="memItemLeft" align="right" valign="top"><a id="a9c7223a3db8fb880e7b7cdc5b229011b"></a>
typedef boost::intrusive_ptr&lt; <a class="el" href="structBlueStore_1_1Collection.html">Collection</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>CollectionRef</b></td></tr>
<tr class="separator:a9c7223a3db8fb880e7b7cdc5b229011b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38f34963297ea02a1abda545b06982d9"><td class="memItemLeft" align="right" valign="top"><a id="a38f34963297ea02a1abda545b06982d9"></a>
typedef boost::intrusive_ptr&lt; <a class="el" href="structBlueStore_1_1SharedBlob.html">SharedBlob</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>SharedBlobRef</b></td></tr>
<tr class="separator:a38f34963297ea02a1abda545b06982d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad85f46fb5ea4bd31699c7baa19de1fd"><td class="memItemLeft" align="right" valign="top"><a id="aad85f46fb5ea4bd31699c7baa19de1fd"></a>
typedef boost::intrusive_ptr&lt; <a class="el" href="structBlueStore_1_1Blob.html">Blob</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>BlobRef</b></td></tr>
<tr class="separator:aad85f46fb5ea4bd31699c7baa19de1fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ca0fc1aa7f5af3c8ad85635b8159b1e"><td class="memItemLeft" align="right" valign="top"><a id="a9ca0fc1aa7f5af3c8ad85635b8159b1e"></a>
typedef mempool::bluestore_cache_meta::map&lt; int, BlobRef &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>blob_map_t</b></td></tr>
<tr class="separator:a9ca0fc1aa7f5af3c8ad85635b8159b1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a128ddda0f8279b1b65ba888c320ec62f"><td class="memItemLeft" align="right" valign="top"><a id="a128ddda0f8279b1b65ba888c320ec62f"></a>
typedef boost::intrusive::set_base_hook&lt; boost::intrusive::optimize_size&lt; true &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlueStore.html#a128ddda0f8279b1b65ba888c320ec62f">ExtentBase</a></td></tr>
<tr class="memdesc:a128ddda0f8279b1b65ba888c320ec62f"><td class="mdescLeft">&#160;</td><td class="mdescRight">a logical extent, pointing to (some portion of) a blob <br /></td></tr>
<tr class="separator:a128ddda0f8279b1b65ba888c320ec62f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5e48c2a1c65037ac67702f9ef4e665a"><td class="memItemLeft" align="right" valign="top"><a id="ab5e48c2a1c65037ac67702f9ef4e665a"></a>
typedef boost::intrusive::set&lt; <a class="el" href="structBlueStore_1_1Extent.html">Extent</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>extent_map_t</b></td></tr>
<tr class="separator:ab5e48c2a1c65037ac67702f9ef4e665a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82d3a050fb9853fd3304d6aa902b52e0"><td class="memItemLeft" align="right" valign="top"><a id="a82d3a050fb9853fd3304d6aa902b52e0"></a>
typedef boost::intrusive::list&lt; <a class="el" href="structBlueStore_1_1OldExtent.html">OldExtent</a>, boost::intrusive::member_hook&lt; <a class="el" href="structBlueStore_1_1OldExtent.html">OldExtent</a>, boost::intrusive::list_member_hook&lt;&gt;, &amp;OldExtent::old_extent_item &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>old_extent_map_t</b></td></tr>
<tr class="separator:a82d3a050fb9853fd3304d6aa902b52e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee6c4b4fcc41ecc235c92ac316946bbc"><td class="memItemLeft" align="right" valign="top"><a id="aee6c4b4fcc41ecc235c92ac316946bbc"></a>
typedef boost::intrusive_ptr&lt; <a class="el" href="structBlueStore_1_1Onode.html">Onode</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>OnodeRef</b></td></tr>
<tr class="separator:aee6c4b4fcc41ecc235c92ac316946bbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5ee068be42c22bed9cf8e5084660ca0"><td class="memItemLeft" align="right" valign="top"><a id="ae5ee068be42c22bed9cf8e5084660ca0"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>OpSequencerRef</b> = ceph::ref_t&lt; <a class="el" href="classBlueStore_1_1OpSequencer.html">OpSequencer</a> &gt;</td></tr>
<tr class="separator:ae5ee068be42c22bed9cf8e5084660ca0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f07fbbaad110f2261ed9b5b89b71e32"><td class="memItemLeft" align="right" valign="top"><a id="a5f07fbbaad110f2261ed9b5b89b71e32"></a>
typedef boost::intrusive::list&lt; <a class="el" href="structBlueStore_1_1TransContext.html">TransContext</a>, boost::intrusive::member_hook&lt; <a class="el" href="structBlueStore_1_1TransContext.html">TransContext</a>, boost::intrusive::list_member_hook&lt;&gt;, &amp;TransContext::deferred_queue_item &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>deferred_queue_t</b></td></tr>
<tr class="separator:a5f07fbbaad110f2261ed9b5b89b71e32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a1f73f6363d36a5a8aa2a548593c599"><td class="memItemLeft" align="right" valign="top"><a id="a9a1f73f6363d36a5a8aa2a548593c599"></a>
typedef boost::intrusive::list&lt; <a class="el" href="classBlueStore_1_1OpSequencer.html">OpSequencer</a>, boost::intrusive::member_hook&lt; <a class="el" href="classBlueStore_1_1OpSequencer.html">OpSequencer</a>, boost::intrusive::list_member_hook&lt;&gt;, &amp;OpSequencer::deferred_osr_queue_item &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>deferred_osr_queue_t</b></td></tr>
<tr class="separator:a9a1f73f6363d36a5a8aa2a548593c599"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59e114c54cd8e6bd4e18a699b48ea593"><td class="memItemLeft" align="right" valign="top"><a id="a59e114c54cd8e6bd4e18a699b48ea593"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>mempool_dynamic_bitset</b> = boost::dynamic_bitset&lt; uint64_t, mempool::bluestore_fsck::pool_allocator&lt; uint64_t &gt; &gt;</td></tr>
<tr class="separator:a59e114c54cd8e6bd4e18a699b48ea593"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9caa2c99eda7c401810b739217c931ac"><td class="memItemLeft" align="right" valign="top"><a id="a9caa2c99eda7c401810b739217c931ac"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>per_pool_statfs</b> = mempool::bluestore_fsck::map&lt; uint64_t, store_statfs_t &gt;</td></tr>
<tr class="separator:a9caa2c99eda7c401810b739217c931ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af24ebc28b17dfb3b9de21552c8def336"><td class="memItemLeft" align="right" valign="top"><a id="af24ebc28b17dfb3b9de21552c8def336"></a>
typedef btree::btree_set&lt; uint64_t, std::less&lt; uint64_t &gt;, mempool::bluestore_fsck::pool_allocator&lt; uint64_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>uint64_t_btree_t</b></td></tr>
<tr class="separator:af24ebc28b17dfb3b9de21552c8def336"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a071f320e930de853bb307631f06e30ab"><td class="memItemLeft" align="right" valign="top"><a id="a071f320e930de853bb307631f06e30ab"></a>
const char **&#160;</td><td class="memItemRight" valign="bottom"><b>get_tracked_conf_keys</b> () const override</td></tr>
<tr class="separator:a071f320e930de853bb307631f06e30ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8036f28444548abb2d8fa6ca0573c1aa"><td class="memItemLeft" align="right" valign="top"><a id="a8036f28444548abb2d8fa6ca0573c1aa"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>handle_conf_change</b> (const ConfigProxy &amp;conf, const std::set&lt; std::string &gt; &amp;changed) override</td></tr>
<tr class="separator:a8036f28444548abb2d8fa6ca0573c1aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6e0280c3a19e9e76c1c7ecbae08906a"><td class="memItemLeft" align="right" valign="top"><a id="ab6e0280c3a19e9e76c1c7ecbae08906a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>handle_discard</b> (interval_set&lt; uint64_t &gt; &amp;to_release)</td></tr>
<tr class="separator:ab6e0280c3a19e9e76c1c7ecbae08906a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4526cd85d8e28cd95d87dbe0ca6fd27e"><td class="memItemLeft" align="right" valign="top"><a id="a4526cd85d8e28cd95d87dbe0ca6fd27e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>_set_csum</b> ()</td></tr>
<tr class="separator:a4526cd85d8e28cd95d87dbe0ca6fd27e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28542ac6e0b241c1a3e0a9f29272d33a"><td class="memItemLeft" align="right" valign="top"><a id="a28542ac6e0b241c1a3e0a9f29272d33a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>_set_compression</b> ()</td></tr>
<tr class="separator:a28542ac6e0b241c1a3e0a9f29272d33a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb01c8fa3d4ccf8b5a13c269e2f29eee"><td class="memItemLeft" align="right" valign="top"><a id="abb01c8fa3d4ccf8b5a13c269e2f29eee"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>_set_throttle_params</b> ()</td></tr>
<tr class="separator:abb01c8fa3d4ccf8b5a13c269e2f29eee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae10907057968758988cf088cc5eb9fae"><td class="memItemLeft" align="right" valign="top"><a id="ae10907057968758988cf088cc5eb9fae"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>_set_cache_sizes</b> ()</td></tr>
<tr class="separator:ae10907057968758988cf088cc5eb9fae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec0a9bb3ee66fdd4786805ebbafc68d7"><td class="memItemLeft" align="right" valign="top"><a id="aec0a9bb3ee66fdd4786805ebbafc68d7"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>_set_max_defer_interval</b> ()</td></tr>
<tr class="separator:aec0a9bb3ee66fdd4786805ebbafc68d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a481e89b9eb23f1a6c3447b9a8dfada0a"><td class="memItemLeft" align="right" valign="top"><a id="a481e89b9eb23f1a6c3447b9a8dfada0a"></a>
utime_t&#160;</td><td class="memItemRight" valign="bottom"><b>get_deferred_last_submitted</b> ()</td></tr>
<tr class="separator:a481e89b9eb23f1a6c3447b9a8dfada0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66549a26860a1bc2874bd6255e23b11a"><td class="memItemLeft" align="right" valign="top"><a id="a66549a26860a1bc2874bd6255e23b11a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>txc_aio_finish</b> (void *p)</td></tr>
<tr class="separator:a66549a26860a1bc2874bd6255e23b11a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01a3489ea1cfd788ed1a3af6024f4e18"><td class="memItemLeft" align="right" valign="top"><a id="a01a3489ea1cfd788ed1a3af6024f4e18"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>deferred_try_submit</b> ()</td></tr>
<tr class="separator:a01a3489ea1cfd788ed1a3af6024f4e18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad584c148a8690c876aeed97eacbd70dd"><td class="memItemLeft" align="right" valign="top"><a id="ad584c148a8690c876aeed97eacbd70dd"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>BlueStore</b> (CephContext *cct, const std::string &amp;path)</td></tr>
<tr class="separator:ad584c148a8690c876aeed97eacbd70dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe33cb050b14a154a2102472147ced52"><td class="memItemLeft" align="right" valign="top"><a id="abe33cb050b14a154a2102472147ced52"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>BlueStore</b> (CephContext *cct, const std::string &amp;path, uint64_t min_alloc_size)</td></tr>
<tr class="separator:abe33cb050b14a154a2102472147ced52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16b771e86a5e3bdecdca00e13485e175"><td class="memItemLeft" align="right" valign="top"><a id="a16b771e86a5e3bdecdca00e13485e175"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>get_type</b> () override</td></tr>
<tr class="separator:a16b771e86a5e3bdecdca00e13485e175"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9e07d570d7f846d2de60400a749f8c0"><td class="memItemLeft" align="right" valign="top"><a id="ab9e07d570d7f846d2de60400a749f8c0"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>needs_journal</b> () override</td></tr>
<tr class="separator:ab9e07d570d7f846d2de60400a749f8c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41aa392d167b047aca0a1c134f7e28f1"><td class="memItemLeft" align="right" valign="top"><a id="a41aa392d167b047aca0a1c134f7e28f1"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>wants_journal</b> () override</td></tr>
<tr class="separator:a41aa392d167b047aca0a1c134f7e28f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a091ce72166f250c7e7dccad7cdd7f9e5"><td class="memItemLeft" align="right" valign="top"><a id="a091ce72166f250c7e7dccad7cdd7f9e5"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>allows_journal</b> () override</td></tr>
<tr class="separator:a091ce72166f250c7e7dccad7cdd7f9e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f59006b0d4dc01176d9a5e29b177911"><td class="memItemLeft" align="right" valign="top"><a id="a7f59006b0d4dc01176d9a5e29b177911"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>prepare_for_fast_shutdown</b> () override</td></tr>
<tr class="separator:a7f59006b0d4dc01176d9a5e29b177911"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e2617ecbd8d07d19ca449b84c3c20a1"><td class="memItemLeft" align="right" valign="top"><a id="a7e2617ecbd8d07d19ca449b84c3c20a1"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>has_null_manager</b> () const override</td></tr>
<tr class="separator:a7e2617ecbd8d07d19ca449b84c3c20a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00fc6b19190caabc3bbb24b01cb0fbbc"><td class="memItemLeft" align="right" valign="top"><a id="a00fc6b19190caabc3bbb24b01cb0fbbc"></a>
uint64_t&#160;</td><td class="memItemRight" valign="bottom"><b>get_min_alloc_size</b> () const override</td></tr>
<tr class="separator:a00fc6b19190caabc3bbb24b01cb0fbbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acec2e5d087a141ba8e2d0bb04e21a14e"><td class="memItemLeft" align="right" valign="top"><a id="acec2e5d087a141ba8e2d0bb04e21a14e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>get_devices</b> (std::set&lt; std::string &gt; *ls) override</td></tr>
<tr class="separator:acec2e5d087a141ba8e2d0bb04e21a14e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5235010e563b7be4d6a07cec90fec278"><td class="memItemLeft" align="right" valign="top"><a id="a5235010e563b7be4d6a07cec90fec278"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>is_rotational</b> () override</td></tr>
<tr class="separator:a5235010e563b7be4d6a07cec90fec278"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1428fe69f805228564373586125c2163"><td class="memItemLeft" align="right" valign="top"><a id="a1428fe69f805228564373586125c2163"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>is_journal_rotational</b> () override</td></tr>
<tr class="separator:a1428fe69f805228564373586125c2163"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab50563cb0d978189443225cf991a0675"><td class="memItemLeft" align="right" valign="top"><a id="ab50563cb0d978189443225cf991a0675"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>is_db_rotational</b> ()</td></tr>
<tr class="separator:ab50563cb0d978189443225cf991a0675"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f0476cdcacff4146df271bcf29106b6"><td class="memItemLeft" align="right" valign="top"><a id="a6f0476cdcacff4146df271bcf29106b6"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>is_statfs_recoverable</b> () const</td></tr>
<tr class="separator:a6f0476cdcacff4146df271bcf29106b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b47b6eda7345324996fa86fb860232c"><td class="memItemLeft" align="right" valign="top"><a id="a4b47b6eda7345324996fa86fb860232c"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>get_default_device_class</b> () override</td></tr>
<tr class="separator:a4b47b6eda7345324996fa86fb860232c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbb6f0dc5840a3ed6d3855ee403bd4fb"><td class="memItemLeft" align="right" valign="top"><a id="adbb6f0dc5840a3ed6d3855ee403bd4fb"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>get_numa_node</b> (int *numa_node, std::set&lt; int &gt; *nodes, std::set&lt; std::string &gt; *failed) override</td></tr>
<tr class="separator:adbb6f0dc5840a3ed6d3855ee403bd4fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2196e14b4991eee83a0dcfcdc557681"><td class="memItemLeft" align="right" valign="top"><a id="ae2196e14b4991eee83a0dcfcdc557681"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>test_mount_in_use</b> () override</td></tr>
<tr class="separator:ae2196e14b4991eee83a0dcfcdc557681"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d738bbb07b2c2dcafdae2d81e3caafe"><td class="memItemLeft" align="right" valign="top"><a id="a7d738bbb07b2c2dcafdae2d81e3caafe"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>mount</b> () override</td></tr>
<tr class="separator:a7d738bbb07b2c2dcafdae2d81e3caafe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a242a37481027bf435c2407ca9c4ea2d2"><td class="memItemLeft" align="right" valign="top"><a id="a242a37481027bf435c2407ca9c4ea2d2"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>umount</b> () override</td></tr>
<tr class="separator:a242a37481027bf435c2407ca9c4ea2d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21fb79adc4111378789b3712161c2381"><td class="memItemLeft" align="right" valign="top"><a id="a21fb79adc4111378789b3712161c2381"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>open_db_environment</b> (KeyValueDB **pdb, bool to_repair)</td></tr>
<tr class="separator:a21fb79adc4111378789b3712161c2381"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecdadcadfa58980b09747012c81421cb"><td class="memItemLeft" align="right" valign="top"><a id="aecdadcadfa58980b09747012c81421cb"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>close_db_environment</b> ()</td></tr>
<tr class="separator:aecdadcadfa58980b09747012c81421cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afde19de7aab27eb07b23a5c7576b3862"><td class="memItemLeft" align="right" valign="top"><a id="afde19de7aab27eb07b23a5c7576b3862"></a>
<a class="el" href="classBlueFS.html">BlueFS</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>get_bluefs</b> ()</td></tr>
<tr class="separator:afde19de7aab27eb07b23a5c7576b3862"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a266700c304c675ed712397c1b5c12d30"><td class="memItemLeft" align="right" valign="top"><a id="a266700c304c675ed712397c1b5c12d30"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>write_meta</b> (const std::string &amp;key, const std::string &amp;value) override</td></tr>
<tr class="separator:a266700c304c675ed712397c1b5c12d30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02011f5eba2f10c8885f77783589205a"><td class="memItemLeft" align="right" valign="top"><a id="a02011f5eba2f10c8885f77783589205a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>read_meta</b> (const std::string &amp;key, std::string *value) override</td></tr>
<tr class="separator:a02011f5eba2f10c8885f77783589205a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae3d1da0fcebf1eb83e28437326ae0ec"><td class="memItemLeft" align="right" valign="top"><a id="aae3d1da0fcebf1eb83e28437326ae0ec"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>read_meta_check</b> (const std::string &amp;key, std::string *value)</td></tr>
<tr class="separator:aae3d1da0fcebf1eb83e28437326ae0ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75e15539af8f89c6982954dd1c8af2c8"><td class="memItemLeft" align="right" valign="top"><a id="a75e15539af8f89c6982954dd1c8af2c8"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>read_meta_conf_check_env</b> ()</td></tr>
<tr class="separator:a75e15539af8f89c6982954dd1c8af2c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e1d7a276d428b7dab3abf4a66538c93"><td class="memItemLeft" align="right" valign="top"><a id="a9e1d7a276d428b7dab3abf4a66538c93"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>cold_open</b> ()</td></tr>
<tr class="separator:a9e1d7a276d428b7dab3abf4a66538c93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa884d1354dd89c35b5a5e8bbe19262c5"><td class="memItemLeft" align="right" valign="top"><a id="aa884d1354dd89c35b5a5e8bbe19262c5"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>cold_close</b> ()</td></tr>
<tr class="separator:aa884d1354dd89c35b5a5e8bbe19262c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd271fc697905baacb9c2dd50cbd6458"><td class="memItemLeft" align="right" valign="top"><a id="afd271fc697905baacb9c2dd50cbd6458"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>fsck</b> (bool deep) override</td></tr>
<tr class="separator:afd271fc697905baacb9c2dd50cbd6458"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16a08e908a0af159988eed24d1682fac"><td class="memItemLeft" align="right" valign="top"><a id="a16a08e908a0af159988eed24d1682fac"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>repair</b> (bool deep) override</td></tr>
<tr class="separator:a16a08e908a0af159988eed24d1682fac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af50a939bf81464059b35caf49fa10902"><td class="memItemLeft" align="right" valign="top"><a id="af50a939bf81464059b35caf49fa10902"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>quick_fix</b> () override</td></tr>
<tr class="separator:af50a939bf81464059b35caf49fa10902"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2e48dd82cc89c7d7c43e1d91cb70cd7"><td class="memItemLeft" align="right" valign="top"><a id="ac2e48dd82cc89c7d7c43e1d91cb70cd7"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_cache_shards</b> (unsigned num) override</td></tr>
<tr class="separator:ac2e48dd82cc89c7d7c43e1d91cb70cd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaf2308b93ab56379983b3443090f65b"><td class="memItemLeft" align="right" valign="top"><a id="aaaf2308b93ab56379983b3443090f65b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>dump_cache_stats</b> (ceph::Formatter *f) override</td></tr>
<tr class="separator:aaaf2308b93ab56379983b3443090f65b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1937b0c642f44c50e9b6552923fad2e"><td class="memItemLeft" align="right" valign="top"><a id="af1937b0c642f44c50e9b6552923fad2e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>dump_cache_stats</b> (std::ostream &amp;ss) override</td></tr>
<tr class="separator:af1937b0c642f44c50e9b6552923fad2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c5985817c57e0cfb2b741a613846a79"><td class="memItemLeft" align="right" valign="top"><a id="a2c5985817c57e0cfb2b741a613846a79"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>validate_hobject_key</b> (const hobject_t &amp;obj) const override</td></tr>
<tr class="separator:a2c5985817c57e0cfb2b741a613846a79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addccc7be891814725fe15cfc04df956d"><td class="memItemLeft" align="right" valign="top"><a id="addccc7be891814725fe15cfc04df956d"></a>
unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>get_max_attr_name_length</b> () override</td></tr>
<tr class="separator:addccc7be891814725fe15cfc04df956d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c0e33a5306aef084f14c8db6fc6df10"><td class="memItemLeft" align="right" valign="top"><a id="a6c0e33a5306aef084f14c8db6fc6df10"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>mkfs</b> () override</td></tr>
<tr class="separator:a6c0e33a5306aef084f14c8db6fc6df10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bbba8c7834c025307ac5a854991407e"><td class="memItemLeft" align="right" valign="top"><a id="a4bbba8c7834c025307ac5a854991407e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>mkjournal</b> () override</td></tr>
<tr class="separator:a4bbba8c7834c025307ac5a854991407e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac834f39aed6a169d144021872f633ef1"><td class="memItemLeft" align="right" valign="top"><a id="ac834f39aed6a169d144021872f633ef1"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>get_db_statistics</b> (ceph::Formatter *f) override</td></tr>
<tr class="separator:ac834f39aed6a169d144021872f633ef1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab204978b7bd15a45b750cd42cdb2a2f0"><td class="memItemLeft" align="right" valign="top"><a id="ab204978b7bd15a45b750cd42cdb2a2f0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>generate_db_histogram</b> (ceph::Formatter *f) override</td></tr>
<tr class="separator:ab204978b7bd15a45b750cd42cdb2a2f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3840a8a40dd0591c987db3cfd7350df1"><td class="memItemLeft" align="right" valign="top"><a id="a3840a8a40dd0591c987db3cfd7350df1"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>_shutdown_cache</b> ()</td></tr>
<tr class="separator:a3840a8a40dd0591c987db3cfd7350df1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add75ee856b4f2898048a264d8103413e"><td class="memItemLeft" align="right" valign="top"><a id="add75ee856b4f2898048a264d8103413e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>flush_cache</b> (std::ostream *os=NULL) override</td></tr>
<tr class="separator:add75ee856b4f2898048a264d8103413e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95c5aa8af55d403ddb7e9225e7a11647"><td class="memItemLeft" align="right" valign="top"><a id="a95c5aa8af55d403ddb7e9225e7a11647"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>dump_perf_counters</b> (ceph::Formatter *f) override</td></tr>
<tr class="separator:a95c5aa8af55d403ddb7e9225e7a11647"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae09be7c009f7466508c97a222dc7eb13"><td class="memItemLeft" align="right" valign="top"><a id="ae09be7c009f7466508c97a222dc7eb13"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>add_new_bluefs_device</b> (int id, const std::string &amp;path)</td></tr>
<tr class="separator:ae09be7c009f7466508c97a222dc7eb13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a809e8f167363f73278ce11d1f29f11"><td class="memItemLeft" align="right" valign="top"><a id="a9a809e8f167363f73278ce11d1f29f11"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>migrate_to_existing_bluefs_device</b> (const std::set&lt; int &gt; &amp;devs_source, int id)</td></tr>
<tr class="separator:a9a809e8f167363f73278ce11d1f29f11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35a23f4b67bb1a64043ffba477d1a2ad"><td class="memItemLeft" align="right" valign="top"><a id="a35a23f4b67bb1a64043ffba477d1a2ad"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>migrate_to_new_bluefs_device</b> (const std::set&lt; int &gt; &amp;devs_source, int id, const std::string &amp;path)</td></tr>
<tr class="separator:a35a23f4b67bb1a64043ffba477d1a2ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a96eb563a8884bd9e228c7d20e39913"><td class="memItemLeft" align="right" valign="top"><a id="a1a96eb563a8884bd9e228c7d20e39913"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>expand_devices</b> (std::ostream &amp;out)</td></tr>
<tr class="separator:a1a96eb563a8884bd9e228c7d20e39913"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d5b2a86ff9b619c0fd5267c079bd063"><td class="memItemLeft" align="right" valign="top"><a id="a6d5b2a86ff9b619c0fd5267c079bd063"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>get_device_path</b> (unsigned id)</td></tr>
<tr class="separator:a6d5b2a86ff9b619c0fd5267c079bd063"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a2509f8d4fb7fdbad2b93c0a1b3b448"><td class="memItemLeft" align="right" valign="top"><a id="a9a2509f8d4fb7fdbad2b93c0a1b3b448"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>dump_bluefs_sizes</b> (std::ostream &amp;out)</td></tr>
<tr class="separator:a9a2509f8d4fb7fdbad2b93c0a1b3b448"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9fec882de1c5b85dd8bca7ece7ed019"><td class="memItemLeft" align="right" valign="top"><a id="ab9fec882de1c5b85dd8bca7ece7ed019"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>statfs</b> (struct store_statfs_t *buf, osd_alert_list_t *alerts=nullptr) override</td></tr>
<tr class="separator:ab9fec882de1c5b85dd8bca7ece7ed019"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affa86ff735a4f41efb03088761d94d40"><td class="memItemLeft" align="right" valign="top"><a id="affa86ff735a4f41efb03088761d94d40"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>pool_statfs</b> (uint64_t pool_id, struct store_statfs_t *buf, bool *per_pool_omap) override</td></tr>
<tr class="separator:affa86ff735a4f41efb03088761d94d40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a733b79d734af9c681b905ee92ce77cc3"><td class="memItemLeft" align="right" valign="top"><a id="a733b79d734af9c681b905ee92ce77cc3"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>collect_metadata</b> (std::map&lt; std::string, std::string &gt; *pm) override</td></tr>
<tr class="separator:a733b79d734af9c681b905ee92ce77cc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34b369a169061d8765ba06d7828f7547"><td class="memItemLeft" align="right" valign="top"><a id="a34b369a169061d8765ba06d7828f7547"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>exists</b> (CollectionHandle &amp;c, const ghobject_t &amp;oid) override</td></tr>
<tr class="separator:a34b369a169061d8765ba06d7828f7547"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa1a870cab3900bd2522d9aa2571cf9e"><td class="memItemLeft" align="right" valign="top"><a id="aaa1a870cab3900bd2522d9aa2571cf9e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>set_collection_opts</b> (CollectionHandle &amp;c, const pool_opts_t &amp;opts) override</td></tr>
<tr class="separator:aaa1a870cab3900bd2522d9aa2571cf9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d016af4769a0815e9257ff1426446a8"><td class="memItemLeft" align="right" valign="top"><a id="a7d016af4769a0815e9257ff1426446a8"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>stat</b> (CollectionHandle &amp;c, const ghobject_t &amp;oid, struct stat *st, bool allow_eio=false) override</td></tr>
<tr class="separator:a7d016af4769a0815e9257ff1426446a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f84197463d1943272ede652230b109e"><td class="memItemLeft" align="right" valign="top"><a id="a0f84197463d1943272ede652230b109e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>read</b> (CollectionHandle &amp;c, const ghobject_t &amp;oid, uint64_t offset, size_t len, ceph::buffer::list &amp;bl, uint32_t op_flags=0) override</td></tr>
<tr class="separator:a0f84197463d1943272ede652230b109e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a008a15dca5bc6a00a043056358ea80b7"><td class="memItemLeft" align="right" valign="top"><a id="a008a15dca5bc6a00a043056358ea80b7"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>fiemap</b> (CollectionHandle &amp;c, const ghobject_t &amp;oid, uint64_t offset, size_t len, ceph::buffer::list &amp;bl) override</td></tr>
<tr class="separator:a008a15dca5bc6a00a043056358ea80b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6803bfe7760a77c66959d29ca38bf94b"><td class="memItemLeft" align="right" valign="top"><a id="a6803bfe7760a77c66959d29ca38bf94b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>fiemap</b> (CollectionHandle &amp;c, const ghobject_t &amp;oid, uint64_t offset, size_t len, std::map&lt; uint64_t, uint64_t &gt; &amp;destmap) override</td></tr>
<tr class="separator:a6803bfe7760a77c66959d29ca38bf94b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfe2d48fbc2ae4bd8a423f7480069e9d"><td class="memItemLeft" align="right" valign="top"><a id="adfe2d48fbc2ae4bd8a423f7480069e9d"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>readv</b> (CollectionHandle &amp;c_, const ghobject_t &amp;oid, interval_set&lt; uint64_t &gt; &amp;m, ceph::buffer::list &amp;bl, uint32_t op_flags) override</td></tr>
<tr class="separator:adfe2d48fbc2ae4bd8a423f7480069e9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3efe4be8708d06e5437d8a627e4882ad"><td class="memItemLeft" align="right" valign="top"><a id="a3efe4be8708d06e5437d8a627e4882ad"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>dump_onode</b> (CollectionHandle &amp;c, const ghobject_t &amp;oid, const std::string &amp;section_name, ceph::Formatter *f) override</td></tr>
<tr class="separator:a3efe4be8708d06e5437d8a627e4882ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f37e9989e3c64292994780bbf3597eb"><td class="memItemLeft" align="right" valign="top"><a id="a1f37e9989e3c64292994780bbf3597eb"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>getattr</b> (CollectionHandle &amp;c, const ghobject_t &amp;oid, const char *name, ceph::buffer::ptr &amp;value) override</td></tr>
<tr class="separator:a1f37e9989e3c64292994780bbf3597eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab25ae0dc2dd974020044ce689ba12d7d"><td class="memItemLeft" align="right" valign="top"><a id="ab25ae0dc2dd974020044ce689ba12d7d"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>getattrs</b> (CollectionHandle &amp;c, const ghobject_t &amp;oid, std::map&lt; std::string, ceph::buffer::ptr, std::less&lt;&gt;&gt; &amp;aset) override</td></tr>
<tr class="separator:ab25ae0dc2dd974020044ce689ba12d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ca67211bc036acc14931c7ed680cad7"><td class="memItemLeft" align="right" valign="top"><a id="a0ca67211bc036acc14931c7ed680cad7"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>list_collections</b> (std::vector&lt; coll_t &gt; &amp;ls) override</td></tr>
<tr class="separator:a0ca67211bc036acc14931c7ed680cad7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff3fe7a054fe0216370f84c155bf49a8"><td class="memItemLeft" align="right" valign="top"><a id="aff3fe7a054fe0216370f84c155bf49a8"></a>
CollectionHandle&#160;</td><td class="memItemRight" valign="bottom"><b>open_collection</b> (const coll_t &amp;c) override</td></tr>
<tr class="separator:aff3fe7a054fe0216370f84c155bf49a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad905fc1637c525a3bd817c935ba40eb6"><td class="memItemLeft" align="right" valign="top"><a id="ad905fc1637c525a3bd817c935ba40eb6"></a>
CollectionHandle&#160;</td><td class="memItemRight" valign="bottom"><b>create_new_collection</b> (const coll_t &amp;cid) override</td></tr>
<tr class="separator:ad905fc1637c525a3bd817c935ba40eb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cf3c4e0643dd90a046660a951925acf"><td class="memItemLeft" align="right" valign="top"><a id="a1cf3c4e0643dd90a046660a951925acf"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_collection_commit_queue</b> (const coll_t &amp;cid, ContextQueue *commit_queue) override</td></tr>
<tr class="separator:a1cf3c4e0643dd90a046660a951925acf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40c9a8525c825d2d6b22091b0a12763e"><td class="memItemLeft" align="right" valign="top"><a id="a40c9a8525c825d2d6b22091b0a12763e"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>collection_exists</b> (const coll_t &amp;c) override</td></tr>
<tr class="separator:a40c9a8525c825d2d6b22091b0a12763e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8db1658525d51256ba03053c803d7eb7"><td class="memItemLeft" align="right" valign="top"><a id="a8db1658525d51256ba03053c803d7eb7"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>collection_empty</b> (CollectionHandle &amp;c, bool *empty) override</td></tr>
<tr class="separator:a8db1658525d51256ba03053c803d7eb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f59709e5c90822d253c90f9bb404c49"><td class="memItemLeft" align="right" valign="top"><a id="a8f59709e5c90822d253c90f9bb404c49"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>collection_bits</b> (CollectionHandle &amp;c) override</td></tr>
<tr class="separator:a8f59709e5c90822d253c90f9bb404c49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc495ca1869bda3282c40042fcc68a31"><td class="memItemLeft" align="right" valign="top"><a id="adc495ca1869bda3282c40042fcc68a31"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>collection_list</b> (CollectionHandle &amp;c, const ghobject_t &amp;start, const ghobject_t &amp;end, int max, std::vector&lt; ghobject_t &gt; *ls, ghobject_t *next) override</td></tr>
<tr class="separator:adc495ca1869bda3282c40042fcc68a31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad63cb92b8e1b8742935b70e9e71dd04"><td class="memItemLeft" align="right" valign="top"><a id="aad63cb92b8e1b8742935b70e9e71dd04"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>collection_list_legacy</b> (CollectionHandle &amp;c, const ghobject_t &amp;start, const ghobject_t &amp;end, int max, std::vector&lt; ghobject_t &gt; *ls, ghobject_t *next) override</td></tr>
<tr class="separator:aad63cb92b8e1b8742935b70e9e71dd04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac29ab0a01aa5bb4631a612be9c402918"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlueStore.html#ac29ab0a01aa5bb4631a612be9c402918">omap_get</a> (CollectionHandle &amp;c, const ghobject_t &amp;oid, ceph::buffer::list *header, std::map&lt; std::string, ceph::buffer::list &gt; *out) override</td></tr>
<tr class="separator:ac29ab0a01aa5bb4631a612be9c402918"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9e79ac5d14d9d251ea24383f225b396"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlueStore.html#ad9e79ac5d14d9d251ea24383f225b396">_omap_get</a> (<a class="el" href="structBlueStore_1_1Collection.html">Collection</a> *c, const ghobject_t &amp;oid, ceph::buffer::list *header, std::map&lt; std::string, ceph::buffer::list &gt; *out)</td></tr>
<tr class="separator:ad9e79ac5d14d9d251ea24383f225b396"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf99958982566b39f8b65bdf4f5e0129"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlueStore.html#abf99958982566b39f8b65bdf4f5e0129">_onode_omap_get</a> (const OnodeRef &amp;o, ceph::buffer::list *header, std::map&lt; std::string, ceph::buffer::list &gt; *out)</td></tr>
<tr class="separator:abf99958982566b39f8b65bdf4f5e0129"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73722d8f1ec6772716aa9f1a4458cdd2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlueStore.html#a73722d8f1ec6772716aa9f1a4458cdd2">omap_get_header</a> (CollectionHandle &amp;c, const ghobject_t &amp;oid, ceph::buffer::list *header, bool allow_eio=false) override</td></tr>
<tr class="memdesc:a73722d8f1ec6772716aa9f1a4458cdd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get omap header.  <a href="classBlueStore.html#a73722d8f1ec6772716aa9f1a4458cdd2">More...</a><br /></td></tr>
<tr class="separator:a73722d8f1ec6772716aa9f1a4458cdd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a108a18f1b84ccfae1bc5bf03ab4c465e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlueStore.html#a108a18f1b84ccfae1bc5bf03ab4c465e">omap_get_keys</a> (CollectionHandle &amp;c, const ghobject_t &amp;oid, std::set&lt; std::string &gt; *keys) override</td></tr>
<tr class="memdesc:a108a18f1b84ccfae1bc5bf03ab4c465e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get keys defined on oid.  <a href="classBlueStore.html#a108a18f1b84ccfae1bc5bf03ab4c465e">More...</a><br /></td></tr>
<tr class="separator:a108a18f1b84ccfae1bc5bf03ab4c465e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5314c900054ea2d0e5780f9353f04e7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlueStore.html#ab5314c900054ea2d0e5780f9353f04e7">omap_get_values</a> (CollectionHandle &amp;c, const ghobject_t &amp;oid, const std::set&lt; std::string &gt; &amp;keys, std::map&lt; std::string, ceph::buffer::list &gt; *out) override</td></tr>
<tr class="memdesc:ab5314c900054ea2d0e5780f9353f04e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get key values.  <a href="classBlueStore.html#ab5314c900054ea2d0e5780f9353f04e7">More...</a><br /></td></tr>
<tr class="separator:ab5314c900054ea2d0e5780f9353f04e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ec138d7788702774ee3f8dc50c28757"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlueStore.html#a4ec138d7788702774ee3f8dc50c28757">omap_check_keys</a> (CollectionHandle &amp;c, const ghobject_t &amp;oid, const std::set&lt; std::string &gt; &amp;keys, std::set&lt; std::string &gt; *out) override</td></tr>
<tr class="memdesc:a4ec138d7788702774ee3f8dc50c28757"><td class="mdescLeft">&#160;</td><td class="mdescRight">Filters keys into out which are defined on oid.  <a href="classBlueStore.html#a4ec138d7788702774ee3f8dc50c28757">More...</a><br /></td></tr>
<tr class="separator:a4ec138d7788702774ee3f8dc50c28757"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a503675ff12d1f2d35df336d2f19bd25a"><td class="memItemLeft" align="right" valign="top">ObjectMap::ObjectMapIterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlueStore.html#a503675ff12d1f2d35df336d2f19bd25a">get_omap_iterator</a> (CollectionHandle &amp;c, const ghobject_t &amp;oid) override</td></tr>
<tr class="separator:a503675ff12d1f2d35df336d2f19bd25a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d7330dbb580710f2662f021d62e5e37"><td class="memItemLeft" align="right" valign="top"><a id="a3d7330dbb580710f2662f021d62e5e37"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_fsid</b> (uuid_d u) override</td></tr>
<tr class="separator:a3d7330dbb580710f2662f021d62e5e37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aded94d182e21d18ea282ebb5b9d1b892"><td class="memItemLeft" align="right" valign="top"><a id="aded94d182e21d18ea282ebb5b9d1b892"></a>
uuid_d&#160;</td><td class="memItemRight" valign="bottom"><b>get_fsid</b> () override</td></tr>
<tr class="separator:aded94d182e21d18ea282ebb5b9d1b892"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc7052841b04e04caaa7ada2e9a511b5"><td class="memItemLeft" align="right" valign="top"><a id="afc7052841b04e04caaa7ada2e9a511b5"></a>
uint64_t&#160;</td><td class="memItemRight" valign="bottom"><b>estimate_objects_overhead</b> (uint64_t num_objects) override</td></tr>
<tr class="separator:afc7052841b04e04caaa7ada2e9a511b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3f9d1e9f1a547ac5f4e6719696a425e"><td class="memItemLeft" align="right" valign="top"><a id="ae3f9d1e9f1a547ac5f4e6719696a425e"></a>
objectstore_perf_stat_t&#160;</td><td class="memItemRight" valign="bottom"><b>get_cur_stats</b> () override</td></tr>
<tr class="separator:ae3f9d1e9f1a547ac5f4e6719696a425e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64239ee9cb4c9251d3dfb9a8572663fd"><td class="memItemLeft" align="right" valign="top"><a id="a64239ee9cb4c9251d3dfb9a8572663fd"></a>
const PerfCounters *&#160;</td><td class="memItemRight" valign="bottom"><b>get_perf_counters</b> () const override</td></tr>
<tr class="separator:a64239ee9cb4c9251d3dfb9a8572663fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8d9ed9ee19ee91122a49cc718506e6d"><td class="memItemLeft" align="right" valign="top"><a id="ac8d9ed9ee19ee91122a49cc718506e6d"></a>
const PerfCounters *&#160;</td><td class="memItemRight" valign="bottom"><b>get_bluefs_perf_counters</b> () const</td></tr>
<tr class="separator:ac8d9ed9ee19ee91122a49cc718506e6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa857dee132909837174c45c9a434e82d"><td class="memItemLeft" align="right" valign="top"><a id="aa857dee132909837174c45c9a434e82d"></a>
KeyValueDB *&#160;</td><td class="memItemRight" valign="bottom"><b>get_kv</b> ()</td></tr>
<tr class="separator:aa857dee132909837174c45c9a434e82d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a158bcc10e0bc37ba228e470565555eee"><td class="memItemLeft" align="right" valign="top"><a id="a158bcc10e0bc37ba228e470565555eee"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>queue_transactions</b> (CollectionHandle &amp;ch, std::vector&lt; Transaction &gt; &amp;tls, TrackedOpRef op=TrackedOpRef(), ThreadPool::TPHandle *handle=NULL) override</td></tr>
<tr class="separator:a158bcc10e0bc37ba228e470565555eee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0933a76e1ff6bd332670fb51a295239b"><td class="memItemLeft" align="right" valign="top"><a id="a0933a76e1ff6bd332670fb51a295239b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>inject_data_error</b> (const ghobject_t &amp;o) override</td></tr>
<tr class="separator:a0933a76e1ff6bd332670fb51a295239b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20558ae6dcea4e541c7942e32ed13629"><td class="memItemLeft" align="right" valign="top"><a id="a20558ae6dcea4e541c7942e32ed13629"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>inject_mdata_error</b> (const ghobject_t &amp;o) override</td></tr>
<tr class="separator:a20558ae6dcea4e541c7942e32ed13629"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa837e14a5df73805474a3f8dd78eaeff"><td class="memItemLeft" align="right" valign="top"><a id="aa837e14a5df73805474a3f8dd78eaeff"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlueStore.html#aa837e14a5df73805474a3f8dd78eaeff">inject_broken_shared_blob_key</a> (const std::string &amp;key, const ceph::buffer::list &amp;bl)</td></tr>
<tr class="memdesc:aa837e14a5df73805474a3f8dd78eaeff"><td class="mdescLeft">&#160;</td><td class="mdescRight">methods to inject various errors fsck can repair <br /></td></tr>
<tr class="separator:aa837e14a5df73805474a3f8dd78eaeff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ccd93ce4acca896264b54cdc26006d3"><td class="memItemLeft" align="right" valign="top"><a id="a9ccd93ce4acca896264b54cdc26006d3"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>inject_no_shared_blob_key</b> ()</td></tr>
<tr class="separator:a9ccd93ce4acca896264b54cdc26006d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40957793d5d3acf47947e5cae7f6c466"><td class="memItemLeft" align="right" valign="top"><a id="a40957793d5d3acf47947e5cae7f6c466"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>inject_stray_shared_blob_key</b> (uint64_t sbid)</td></tr>
<tr class="separator:a40957793d5d3acf47947e5cae7f6c466"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82d31987a9e49d2317e16985e5bfa13f"><td class="memItemLeft" align="right" valign="top"><a id="a82d31987a9e49d2317e16985e5bfa13f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>inject_leaked</b> (uint64_t len)</td></tr>
<tr class="separator:a82d31987a9e49d2317e16985e5bfa13f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdd6334adb8bb857e640ff0304c991f8"><td class="memItemLeft" align="right" valign="top"><a id="acdd6334adb8bb857e640ff0304c991f8"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>inject_false_free</b> (coll_t cid, ghobject_t oid)</td></tr>
<tr class="separator:acdd6334adb8bb857e640ff0304c991f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94b1ee8a2112c7baed1bbcc419091cd7"><td class="memItemLeft" align="right" valign="top"><a id="a94b1ee8a2112c7baed1bbcc419091cd7"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>inject_statfs</b> (const std::string &amp;key, const store_statfs_t &amp;new_statfs)</td></tr>
<tr class="separator:a94b1ee8a2112c7baed1bbcc419091cd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f54fb3f8735baf9c3b815a148d1df3e"><td class="memItemLeft" align="right" valign="top"><a id="a4f54fb3f8735baf9c3b815a148d1df3e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>inject_global_statfs</b> (const store_statfs_t &amp;new_statfs)</td></tr>
<tr class="separator:a4f54fb3f8735baf9c3b815a148d1df3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e62d4d1ec819070c0b7ea7e02052f6d"><td class="memItemLeft" align="right" valign="top"><a id="a0e62d4d1ec819070c0b7ea7e02052f6d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>inject_misreference</b> (coll_t cid1, ghobject_t oid1, coll_t cid2, ghobject_t oid2, uint64_t offset)</td></tr>
<tr class="separator:a0e62d4d1ec819070c0b7ea7e02052f6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a320588753005a462e9097343457678"><td class="memItemLeft" align="right" valign="top"><a id="a1a320588753005a462e9097343457678"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>inject_zombie_spanning_blob</b> (coll_t cid, ghobject_t oid, int16_t blob_id)</td></tr>
<tr class="separator:a1a320588753005a462e9097343457678"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e3b9aae21ae701734051563a383914d"><td class="memItemLeft" align="right" valign="top"><a id="a1e3b9aae21ae701734051563a383914d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>inject_legacy_omap</b> ()</td></tr>
<tr class="separator:a1e3b9aae21ae701734051563a383914d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa38c230b4ba23b8828d965f8b0f924bf"><td class="memItemLeft" align="right" valign="top"><a id="aa38c230b4ba23b8828d965f8b0f924bf"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>inject_legacy_omap</b> (coll_t cid, ghobject_t oid)</td></tr>
<tr class="separator:aa38c230b4ba23b8828d965f8b0f924bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52bc2ec0c2b3463e8fca6927ac3bfa6f"><td class="memItemLeft" align="right" valign="top"><a id="a52bc2ec0c2b3463e8fca6927ac3bfa6f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>inject_stray_omap</b> (uint64_t head, const std::string &amp;name)</td></tr>
<tr class="separator:a52bc2ec0c2b3463e8fca6927ac3bfa6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd3610d8bf5228a94a6382b8a5435b36"><td class="memItemLeft" align="right" valign="top"><a id="abd3610d8bf5228a94a6382b8a5435b36"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>inject_bluefs_file</b> (std::string_view dir, std::string_view name, size_t new_size)</td></tr>
<tr class="separator:abd3610d8bf5228a94a6382b8a5435b36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fd2dad1135498860bebf1dffa2fbf19"><td class="memItemLeft" align="right" valign="top"><a id="a4fd2dad1135498860bebf1dffa2fbf19"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>compact</b> () override</td></tr>
<tr class="separator:a4fd2dad1135498860bebf1dffa2fbf19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16d1e03fa4974fc6a10f8902bd994950"><td class="memItemLeft" align="right" valign="top"><a id="a16d1e03fa4974fc6a10f8902bd994950"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>has_builtin_csum</b> () const override</td></tr>
<tr class="separator:a16d1e03fa4974fc6a10f8902bd994950"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d4edd67c687b749f56cedd9a1dd2c06"><td class="memItemLeft" align="right" valign="top"><a id="a1d4edd67c687b749f56cedd9a1dd2c06"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>debug_punch_hole</b> (CollectionRef &amp;c, OnodeRef &amp;o, uint32_t off, uint32_t len)</td></tr>
<tr class="separator:a1d4edd67c687b749f56cedd9a1dd2c06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2da6958bb69afb70e9111fd8e94ceaec"><td class="memItemLeft" align="right" valign="top"><a id="a2da6958bb69afb70e9111fd8e94ceaec"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>log_latency</b> (const char *name, int idx, const ceph::timespan &amp;lat, double lat_threshold, const char *info=&quot;&quot;, int idx2=l_bluestore_first) const</td></tr>
<tr class="separator:a2da6958bb69afb70e9111fd8e94ceaec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad76e29c8dd8d9b4b7ad7656421c263ad"><td class="memItemLeft" align="right" valign="top"><a id="ad76e29c8dd8d9b4b7ad7656421c263ad"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>log_latency_fn</b> (const char *name, int idx, const ceph::timespan &amp;lat, double lat_threshold, std::function&lt; std::string(const ceph::timespan &amp;lat)&gt; fn, int idx2=l_bluestore_first) const</td></tr>
<tr class="separator:ad76e29c8dd8d9b4b7ad7656421c263ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a993b10d053ddda7e7429bc5482058405"><td class="memItemLeft" align="right" valign="top"><a id="a993b10d053ddda7e7429bc5482058405"></a>
OnodeRef&#160;</td><td class="memItemRight" valign="bottom"><b>fsck_check_objects_shallow</b> (FSCKDepth depth, int64_t pool_id, CollectionRef c, const ghobject_t &amp;oid, const std::string &amp;key, const ceph::buffer::list &amp;value, mempool::bluestore_fsck::list&lt; std::string &gt; *expecting_shards, std::map&lt; BlobRef, bluestore_blob_t::unused_t &gt; *referenced, const <a class="el" href="structBlueStore_1_1FSCK__ObjectCtx.html">BlueStore::FSCK_ObjectCtx</a> &amp;ctx)</td></tr>
<tr class="separator:a993b10d053ddda7e7429bc5482058405"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50e2846b2bc4e6f31781abd6be41d823"><td class="memItemLeft" align="right" valign="top"><a id="a50e2846b2bc4e6f31781abd6be41d823"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>push_allocation_to_rocksdb</b> ()</td></tr>
<tr class="separator:a50e2846b2bc4e6f31781abd6be41d823"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5dd056ff32cee4bbd0a6ceae29cfdd7"><td class="memItemLeft" align="right" valign="top"><a id="aa5dd056ff32cee4bbd0a6ceae29cfdd7"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>read_allocation_from_drive_for_bluestore_tool</b> ()</td></tr>
<tr class="separator:aa5dd056ff32cee4bbd0a6ceae29cfdd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5369686409a59c70a69ab6de944944fc"><td class="memItemLeft" align="right" valign="top"><a id="a5369686409a59c70a69ab6de944944fc"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_allocation_in_simple_bmap</b> (<a class="el" href="classSimpleBitmap.html">SimpleBitmap</a> *sbmap, uint64_t offset, uint64_t length)</td></tr>
<tr class="separator:a5369686409a59c70a69ab6de944944fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a606f4446a1028767094bd40378475e20"><td class="memItemLeft" align="right" valign="top"><a id="a606f4446a1028767094bd40378475e20"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>_write_bdev_label</b> (CephContext *cct, const std::string &amp;path, <a class="el" href="structbluestore__bdev__label__t.html">bluestore_bdev_label_t</a> label)</td></tr>
<tr class="separator:a606f4446a1028767094bd40378475e20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a030041f7114931f91a0a054632f95c00"><td class="memItemLeft" align="right" valign="top"><a id="a030041f7114931f91a0a054632f95c00"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>_read_bdev_label</b> (CephContext *cct, const std::string &amp;path, <a class="el" href="structbluestore__bdev__label__t.html">bluestore_bdev_label_t</a> *label)</td></tr>
<tr class="separator:a030041f7114931f91a0a054632f95c00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e51b94faa2ffa0bcc829ad754df5307"><td class="memItemLeft" align="right" valign="top"><a id="a1e51b94faa2ffa0bcc829ad754df5307"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>get_block_device_fsid</b> (CephContext *cct, const std::string &amp;path, uuid_d *fsid)</td></tr>
<tr class="separator:a1e51b94faa2ffa0bcc829ad754df5307"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a1333167be97d1d26498d617ead2b769d"><td class="memItemLeft" align="right" valign="top"><a id="a1333167be97d1d26498d617ead2b769d"></a>
class <a class="el" href="classBlueStore_1_1BlueStoreThrottle.html">BlueStore::BlueStoreThrottle</a>&#160;</td><td class="memItemRight" valign="bottom"><b>throttle</b></td></tr>
<tr class="separator:a1333167be97d1d26498d617ead2b769d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7a1694019fd7cefef2628364e3878cc"><td class="memItemLeft" align="right" valign="top"><a id="ad7a1694019fd7cefef2628364e3878cc"></a>
const int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlueStore.html#ad7a1694019fd7cefef2628364e3878cc">latest_ondisk_format</a> = 4</td></tr>
<tr class="memdesc:ad7a1694019fd7cefef2628364e3878cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">our version <br /></td></tr>
<tr class="separator:ad7a1694019fd7cefef2628364e3878cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a880bfa15aff08b839f4fa0b39c284a12"><td class="memItemLeft" align="right" valign="top"><a id="a880bfa15aff08b839f4fa0b39c284a12"></a>
const int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlueStore.html#a880bfa15aff08b839f4fa0b39c284a12">min_readable_ondisk_format</a> = 1</td></tr>
<tr class="memdesc:a880bfa15aff08b839f4fa0b39c284a12"><td class="mdescLeft">&#160;</td><td class="mdescRight">what we can read <br /></td></tr>
<tr class="separator:a880bfa15aff08b839f4fa0b39c284a12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44c74ccc2a356a7f014d0251a5415f98"><td class="memItemLeft" align="right" valign="top"><a id="a44c74ccc2a356a7f014d0251a5415f98"></a>
const int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlueStore.html#a44c74ccc2a356a7f014d0251a5415f98">min_compat_ondisk_format</a> = 3</td></tr>
<tr class="memdesc:a44c74ccc2a356a7f014d0251a5415f98"><td class="mdescLeft">&#160;</td><td class="mdescRight">who can read us <br /></td></tr>
<tr class="separator:a44c74ccc2a356a7f014d0251a5415f98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdb2d5c30878ab7b46ca0431921b39c1"><td class="memItemLeft" align="right" valign="top"><a id="afdb2d5c30878ab7b46ca0431921b39c1"></a>
struct <a class="el" href="structBlueStore_1_1BSPerfTracker.html">BlueStore::BSPerfTracker</a>&#160;</td><td class="memItemRight" valign="bottom"><b>perf_tracker</b></td></tr>
<tr class="separator:afdb2d5c30878ab7b46ca0431921b39c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:ad3b3d296806843361514757b2949d050"><td class="memItemLeft" align="right" valign="top"><a id="ad3b3d296806843361514757b2949d050"></a>
std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator&lt;&lt;</b> (std::ostream &amp;out, const <a class="el" href="structBlueStore_1_1Extent.html">Extent</a> &amp;e)</td></tr>
<tr class="separator:ad3b3d296806843361514757b2949d050"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b8bad2ff4f9637f92ce36feb1e1c171"><td class="memTemplParams" colspan="2"><a id="a5b8bad2ff4f9637f92ce36feb1e1c171"></a>
template&lt;int LogLevelV&gt; </td></tr>
<tr class="memitem:a5b8bad2ff4f9637f92ce36feb1e1c171"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><b>_dump_onode</b> (CephContext *cct, const <a class="el" href="structBlueStore_1_1Onode.html">Onode</a> &amp;o)</td></tr>
<tr class="separator:a5b8bad2ff4f9637f92ce36feb1e1c171"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa2554656fd62ce293771f579ca7d7d8"><td class="memTemplParams" colspan="2"><a id="aaa2554656fd62ce293771f579ca7d7d8"></a>
template&lt;int LogLevelV&gt; </td></tr>
<tr class="memitem:aaa2554656fd62ce293771f579ca7d7d8"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><b>_dump_extent_map</b> (CephContext *cct, const <a class="el" href="structBlueStore_1_1ExtentMap.html">ExtentMap</a> &amp;em)</td></tr>
<tr class="separator:aaa2554656fd62ce293771f579ca7d7d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa37ef6de576d082799ee279d65f73593"><td class="memTemplParams" colspan="2"><a id="aa37ef6de576d082799ee279d65f73593"></a>
template&lt;int LogLevelV&gt; </td></tr>
<tr class="memitem:aa37ef6de576d082799ee279d65f73593"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><b>_dump_transaction</b> (CephContext *cct, Transaction *t)</td></tr>
<tr class="separator:aa37ef6de576d082799ee279d65f73593"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5786fe317c24a5b77f2fdaff4bf0bdb2"><td class="memItemLeft" align="right" valign="top"><a id="a5786fe317c24a5b77f2fdaff4bf0bdb2"></a>
std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator&lt;&lt;</b> (std::ostream &amp;out, const read_alloc_stats_t &amp;stats)</td></tr>
<tr class="separator:a5786fe317c24a5b77f2fdaff4bf0bdb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="BlueStore_8h_source.html#l00229">229</a> of file <a class="el" href="BlueStore_8h_source.html">BlueStore.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ad9e79ac5d14d9d251ea24383f225b396"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9e79ac5d14d9d251ea24383f225b396">&#9670;&nbsp;</a></span>_omap_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BlueStore::_omap_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structBlueStore_1_1Collection.html">Collection</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ghobject_t &amp;&#160;</td>
          <td class="paramname"><em>oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ceph::buffer::list *&#160;</td>
          <td class="paramname"><em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; std::string, ceph::buffer::list &gt; *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">c</td><td><a class="el" href="structBlueStore_1_1Collection.html">Collection</a> containing oid </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">oid</td><td>Object containing omap </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">header</td><td>omap header </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">out</td><td>&lt; [out] Key to value map </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BlueStore_8cc_source.html#l13045">13045</a> of file <a class="el" href="BlueStore_8cc_source.html">BlueStore.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l13051"></a><span class="lineno">13051</span>&#160;{</div>
<div class="line"><a name="l13052"></a><span class="lineno">13052</span>&#160;  dout(15) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; c-&gt;get_cid() &lt;&lt; <span class="stringliteral">&quot; oid &quot;</span> &lt;&lt; oid &lt;&lt; dendl;</div>
<div class="line"><a name="l13053"></a><span class="lineno">13053</span>&#160;  <span class="keywordflow">if</span> (!c-&gt;exists)</div>
<div class="line"><a name="l13054"></a><span class="lineno">13054</span>&#160;    <span class="keywordflow">return</span> -ENOENT;</div>
<div class="line"><a name="l13055"></a><span class="lineno">13055</span>&#160;  std::shared_lock l(c-&gt;lock);</div>
<div class="line"><a name="l13056"></a><span class="lineno">13056</span>&#160;  <span class="keywordtype">int</span> r = 0;</div>
<div class="line"><a name="l13057"></a><span class="lineno">13057</span>&#160;  OnodeRef o = c-&gt;get_onode(oid, <span class="keyword">false</span>);</div>
<div class="line"><a name="l13058"></a><span class="lineno">13058</span>&#160;  <span class="keywordflow">if</span> (!o || !o-&gt;exists) {</div>
<div class="line"><a name="l13059"></a><span class="lineno">13059</span>&#160;    r = -ENOENT;</div>
<div class="line"><a name="l13060"></a><span class="lineno">13060</span>&#160;    <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l13061"></a><span class="lineno">13061</span>&#160;  }</div>
<div class="line"><a name="l13062"></a><span class="lineno">13062</span>&#160;  r = <a class="code" href="classBlueStore.html#abf99958982566b39f8b65bdf4f5e0129">_onode_omap_get</a>(o, header, out);</div>
<div class="line"><a name="l13063"></a><span class="lineno">13063</span>&#160; out:</div>
<div class="line"><a name="l13064"></a><span class="lineno">13064</span>&#160;  dout(10) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; c-&gt;get_cid() &lt;&lt; <span class="stringliteral">&quot; oid &quot;</span> &lt;&lt; oid &lt;&lt; <span class="stringliteral">&quot; = &quot;</span> &lt;&lt; r</div>
<div class="line"><a name="l13065"></a><span class="lineno">13065</span>&#160;       &lt;&lt; dendl;</div>
<div class="line"><a name="l13066"></a><span class="lineno">13066</span>&#160;  <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l13067"></a><span class="lineno">13067</span>&#160;}</div>
<div class="ttc" id="aclassBlueStore_html_abf99958982566b39f8b65bdf4f5e0129"><div class="ttname"><a href="classBlueStore.html#abf99958982566b39f8b65bdf4f5e0129">BlueStore::_onode_omap_get</a></div><div class="ttdeci">int _onode_omap_get(const OnodeRef &amp;o, ceph::buffer::list *header, std::map&lt; std::string, ceph::buffer::list &gt; *out)</div><div class="ttdef"><b>Definition:</b> <a href="BlueStore_8cc_source.html#l13069">BlueStore.cc:13069</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abf99958982566b39f8b65bdf4f5e0129"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf99958982566b39f8b65bdf4f5e0129">&#9670;&nbsp;</a></span>_onode_omap_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BlueStore::_onode_omap_get </td>
          <td>(</td>
          <td class="paramtype">const OnodeRef &amp;&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ceph::buffer::list *&#160;</td>
          <td class="paramname"><em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; std::string, ceph::buffer::list &gt; *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">o</td><td>Object containing omap </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">header</td><td>omap header </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">out</td><td>&lt; [out] Key to value map </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BlueStore_8cc_source.html#l13069">13069</a> of file <a class="el" href="BlueStore_8cc_source.html">BlueStore.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l13074"></a><span class="lineno">13074</span>&#160;{</div>
<div class="line"><a name="l13075"></a><span class="lineno">13075</span>&#160;  <span class="keywordtype">int</span> r = 0;</div>
<div class="line"><a name="l13076"></a><span class="lineno">13076</span>&#160;  <span class="keywordflow">if</span> (!o || !o-&gt;exists) {</div>
<div class="line"><a name="l13077"></a><span class="lineno">13077</span>&#160;    r = -ENOENT;</div>
<div class="line"><a name="l13078"></a><span class="lineno">13078</span>&#160;    <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l13079"></a><span class="lineno">13079</span>&#160;  }</div>
<div class="line"><a name="l13080"></a><span class="lineno">13080</span>&#160;  <span class="keywordflow">if</span> (!o-&gt;onode.has_omap())</div>
<div class="line"><a name="l13081"></a><span class="lineno">13081</span>&#160;    <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l13082"></a><span class="lineno">13082</span>&#160;  o-&gt;flush();</div>
<div class="line"><a name="l13083"></a><span class="lineno">13083</span>&#160;  {</div>
<div class="line"><a name="l13084"></a><span class="lineno">13084</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; prefix = o-&gt;get_omap_prefix();</div>
<div class="line"><a name="l13085"></a><span class="lineno">13085</span>&#160;    <span class="keywordtype">string</span> head, tail;</div>
<div class="line"><a name="l13086"></a><span class="lineno">13086</span>&#160;    o-&gt;get_omap_header(&amp;head);</div>
<div class="line"><a name="l13087"></a><span class="lineno">13087</span>&#160;    o-&gt;get_omap_tail(&amp;tail);</div>
<div class="line"><a name="l13088"></a><span class="lineno">13088</span>&#160;    KeyValueDB::Iterator it = db-&gt;get_iterator(prefix, 0, KeyValueDB::IteratorBounds{head, tail});</div>
<div class="line"><a name="l13089"></a><span class="lineno">13089</span>&#160;    it-&gt;lower_bound(head);</div>
<div class="line"><a name="l13090"></a><span class="lineno">13090</span>&#160;    <span class="keywordflow">while</span> (it-&gt;valid()) {</div>
<div class="line"><a name="l13091"></a><span class="lineno">13091</span>&#160;      <span class="keywordflow">if</span> (it-&gt;key() == head) {</div>
<div class="line"><a name="l13092"></a><span class="lineno">13092</span>&#160;        dout(30) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;  got header&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a name="l13093"></a><span class="lineno">13093</span>&#160;        *header = it-&gt;value();</div>
<div class="line"><a name="l13094"></a><span class="lineno">13094</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (it-&gt;key() &gt;= tail) {</div>
<div class="line"><a name="l13095"></a><span class="lineno">13095</span>&#160;        dout(30) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;  reached tail&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a name="l13096"></a><span class="lineno">13096</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l13097"></a><span class="lineno">13097</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l13098"></a><span class="lineno">13098</span>&#160;        <span class="keywordtype">string</span> user_key;</div>
<div class="line"><a name="l13099"></a><span class="lineno">13099</span>&#160;        o-&gt;decode_omap_key(it-&gt;key(), &amp;user_key);</div>
<div class="line"><a name="l13100"></a><span class="lineno">13100</span>&#160;        dout(20) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;  got &quot;</span> &lt;&lt; pretty_binary_string(it-&gt;key())</div>
<div class="line"><a name="l13101"></a><span class="lineno">13101</span>&#160;          &lt;&lt; <span class="stringliteral">&quot; -&gt; &quot;</span> &lt;&lt; user_key &lt;&lt; dendl;</div>
<div class="line"><a name="l13102"></a><span class="lineno">13102</span>&#160;        (*out)[user_key] = it-&gt;value();</div>
<div class="line"><a name="l13103"></a><span class="lineno">13103</span>&#160;      }</div>
<div class="line"><a name="l13104"></a><span class="lineno">13104</span>&#160;      it-&gt;next();</div>
<div class="line"><a name="l13105"></a><span class="lineno">13105</span>&#160;    }</div>
<div class="line"><a name="l13106"></a><span class="lineno">13106</span>&#160;  }</div>
<div class="line"><a name="l13107"></a><span class="lineno">13107</span>&#160;out:</div>
<div class="line"><a name="l13108"></a><span class="lineno">13108</span>&#160;  <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l13109"></a><span class="lineno">13109</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a503675ff12d1f2d35df336d2f19bd25a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a503675ff12d1f2d35df336d2f19bd25a">&#9670;&nbsp;</a></span>get_omap_iterator()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ObjectMap::ObjectMapIterator BlueStore::get_omap_iterator </td>
          <td>(</td>
          <td class="paramtype">CollectionHandle &amp;&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ghobject_t &amp;&#160;</td>
          <td class="paramname"><em>oid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">c</td><td>collection </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">oid</td><td>object </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BlueStore_8cc_source.html#l13340">13340</a> of file <a class="el" href="BlueStore_8cc_source.html">BlueStore.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l13344"></a><span class="lineno">13344</span>&#160;{</div>
<div class="line"><a name="l13345"></a><span class="lineno">13345</span>&#160;  Collection *c = <span class="keyword">static_cast&lt;</span>Collection *<span class="keyword">&gt;</span>(c_.get());</div>
<div class="line"><a name="l13346"></a><span class="lineno">13346</span>&#160;  dout(10) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; c-&gt;get_cid() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; oid &lt;&lt; dendl;</div>
<div class="line"><a name="l13347"></a><span class="lineno">13347</span>&#160;  <span class="keywordflow">if</span> (!c-&gt;exists) {</div>
<div class="line"><a name="l13348"></a><span class="lineno">13348</span>&#160;    <span class="keywordflow">return</span> ObjectMap::ObjectMapIterator();</div>
<div class="line"><a name="l13349"></a><span class="lineno">13349</span>&#160;  }</div>
<div class="line"><a name="l13350"></a><span class="lineno">13350</span>&#160;  std::shared_lock l(c-&gt;lock);</div>
<div class="line"><a name="l13351"></a><span class="lineno">13351</span>&#160;  OnodeRef o = c-&gt;get_onode(oid, <span class="keyword">false</span>);</div>
<div class="line"><a name="l13352"></a><span class="lineno">13352</span>&#160;  <span class="keywordflow">if</span> (!o || !o-&gt;exists) {</div>
<div class="line"><a name="l13353"></a><span class="lineno">13353</span>&#160;    dout(10) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; oid &lt;&lt; <span class="stringliteral">&quot;doesn&#39;t exist&quot;</span> &lt;&lt;dendl;</div>
<div class="line"><a name="l13354"></a><span class="lineno">13354</span>&#160;    <span class="keywordflow">return</span> ObjectMap::ObjectMapIterator();</div>
<div class="line"><a name="l13355"></a><span class="lineno">13355</span>&#160;  }</div>
<div class="line"><a name="l13356"></a><span class="lineno">13356</span>&#160;  o-&gt;flush();</div>
<div class="line"><a name="l13357"></a><span class="lineno">13357</span>&#160;  dout(10) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot; has_omap = &quot;</span> &lt;&lt; (int)o-&gt;onode.has_omap() &lt;&lt;dendl;</div>
<div class="line"><a name="l13358"></a><span class="lineno">13358</span>&#160;  <span class="keyword">auto</span> bounds = KeyValueDB::IteratorBounds();</div>
<div class="line"><a name="l13359"></a><span class="lineno">13359</span>&#160;  <span class="keywordflow">if</span> (o-&gt;onode.has_omap()) {</div>
<div class="line"><a name="l13360"></a><span class="lineno">13360</span>&#160;    std::string lower_bound, upper_bound;</div>
<div class="line"><a name="l13361"></a><span class="lineno">13361</span>&#160;    o-&gt;get_omap_key(<span class="keywordtype">string</span>(), &amp;lower_bound);</div>
<div class="line"><a name="l13362"></a><span class="lineno">13362</span>&#160;    o-&gt;get_omap_tail(&amp;upper_bound);</div>
<div class="line"><a name="l13363"></a><span class="lineno">13363</span>&#160;    bounds.lower_bound = std::move(lower_bound);</div>
<div class="line"><a name="l13364"></a><span class="lineno">13364</span>&#160;    bounds.upper_bound = std::move(upper_bound);</div>
<div class="line"><a name="l13365"></a><span class="lineno">13365</span>&#160;  }</div>
<div class="line"><a name="l13366"></a><span class="lineno">13366</span>&#160;  KeyValueDB::Iterator it = db-&gt;get_iterator(o-&gt;get_omap_prefix(), 0, std::move(bounds));</div>
<div class="line"><a name="l13367"></a><span class="lineno">13367</span>&#160;  <span class="keywordflow">return</span> ObjectMap::ObjectMapIterator(<span class="keyword">new</span> OmapIteratorImpl(logger,c, o, it));</div>
<div class="line"><a name="l13368"></a><span class="lineno">13368</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4ec138d7788702774ee3f8dc50c28757"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ec138d7788702774ee3f8dc50c28757">&#9670;&nbsp;</a></span>omap_check_keys()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int BlueStore::omap_check_keys </td>
          <td>(</td>
          <td class="paramtype">CollectionHandle &amp;&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ghobject_t &amp;&#160;</td>
          <td class="paramname"><em>oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::set&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>keys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::set&lt; std::string &gt; *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Filters keys into out which are defined on oid. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">c</td><td><a class="el" href="structBlueStore_1_1Collection.html">Collection</a> containing oid </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">oid</td><td>Object containing omap </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">keys</td><td>Keys to check </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out</td><td>Subset of keys defined on oid </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BlueStore_8cc_source.html#l13293">13293</a> of file <a class="el" href="BlueStore_8cc_source.html">BlueStore.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l13299"></a><span class="lineno">13299</span>&#160;{</div>
<div class="line"><a name="l13300"></a><span class="lineno">13300</span>&#160;  Collection *c = <span class="keyword">static_cast&lt;</span>Collection *<span class="keyword">&gt;</span>(c_.get());</div>
<div class="line"><a name="l13301"></a><span class="lineno">13301</span>&#160;  dout(15) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; c-&gt;get_cid() &lt;&lt; <span class="stringliteral">&quot; oid &quot;</span> &lt;&lt; oid &lt;&lt; dendl;</div>
<div class="line"><a name="l13302"></a><span class="lineno">13302</span>&#160;  <span class="keywordflow">if</span> (!c-&gt;exists)</div>
<div class="line"><a name="l13303"></a><span class="lineno">13303</span>&#160;    <span class="keywordflow">return</span> -ENOENT;</div>
<div class="line"><a name="l13304"></a><span class="lineno">13304</span>&#160;  std::shared_lock l(c-&gt;lock);</div>
<div class="line"><a name="l13305"></a><span class="lineno">13305</span>&#160;  <span class="keywordtype">int</span> r = 0;</div>
<div class="line"><a name="l13306"></a><span class="lineno">13306</span>&#160;  <span class="keywordtype">string</span> final_key;</div>
<div class="line"><a name="l13307"></a><span class="lineno">13307</span>&#160;  OnodeRef o = c-&gt;get_onode(oid, <span class="keyword">false</span>);</div>
<div class="line"><a name="l13308"></a><span class="lineno">13308</span>&#160;  <span class="keywordflow">if</span> (!o || !o-&gt;exists) {</div>
<div class="line"><a name="l13309"></a><span class="lineno">13309</span>&#160;    r = -ENOENT;</div>
<div class="line"><a name="l13310"></a><span class="lineno">13310</span>&#160;    <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l13311"></a><span class="lineno">13311</span>&#160;  }</div>
<div class="line"><a name="l13312"></a><span class="lineno">13312</span>&#160;  <span class="keywordflow">if</span> (!o-&gt;onode.has_omap()) {</div>
<div class="line"><a name="l13313"></a><span class="lineno">13313</span>&#160;    <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l13314"></a><span class="lineno">13314</span>&#160;  }</div>
<div class="line"><a name="l13315"></a><span class="lineno">13315</span>&#160;  o-&gt;flush();</div>
<div class="line"><a name="l13316"></a><span class="lineno">13316</span>&#160;  {</div>
<div class="line"><a name="l13317"></a><span class="lineno">13317</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; prefix = o-&gt;get_omap_prefix();</div>
<div class="line"><a name="l13318"></a><span class="lineno">13318</span>&#160;    o-&gt;get_omap_key(<span class="keywordtype">string</span>(), &amp;final_key);</div>
<div class="line"><a name="l13319"></a><span class="lineno">13319</span>&#160;    <span class="keywordtype">size_t</span> base_key_len = final_key.size();</div>
<div class="line"><a name="l13320"></a><span class="lineno">13320</span>&#160;    <span class="keywordflow">for</span> (set&lt;string&gt;::const_iterator p = keys.begin(); p != keys.end(); ++p) {</div>
<div class="line"><a name="l13321"></a><span class="lineno">13321</span>&#160;      final_key.resize(base_key_len); <span class="comment">// keep prefix</span></div>
<div class="line"><a name="l13322"></a><span class="lineno">13322</span>&#160;      final_key += *p;</div>
<div class="line"><a name="l13323"></a><span class="lineno">13323</span>&#160;      bufferlist val;</div>
<div class="line"><a name="l13324"></a><span class="lineno">13324</span>&#160;      <span class="keywordflow">if</span> (db-&gt;get(prefix, final_key, &amp;val) &gt;= 0) {</div>
<div class="line"><a name="l13325"></a><span class="lineno">13325</span>&#160;    dout(30) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;  have &quot;</span> &lt;&lt; pretty_binary_string(final_key)</div>
<div class="line"><a name="l13326"></a><span class="lineno">13326</span>&#160;         &lt;&lt; <span class="stringliteral">&quot; -&gt; &quot;</span> &lt;&lt; *p &lt;&lt; dendl;</div>
<div class="line"><a name="l13327"></a><span class="lineno">13327</span>&#160;    out-&gt;insert(*p);</div>
<div class="line"><a name="l13328"></a><span class="lineno">13328</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l13329"></a><span class="lineno">13329</span>&#160;    dout(30) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;  miss &quot;</span> &lt;&lt; pretty_binary_string(final_key)</div>
<div class="line"><a name="l13330"></a><span class="lineno">13330</span>&#160;         &lt;&lt; <span class="stringliteral">&quot; -&gt; &quot;</span> &lt;&lt; *p &lt;&lt; dendl;</div>
<div class="line"><a name="l13331"></a><span class="lineno">13331</span>&#160;      }</div>
<div class="line"><a name="l13332"></a><span class="lineno">13332</span>&#160;    }</div>
<div class="line"><a name="l13333"></a><span class="lineno">13333</span>&#160;  }</div>
<div class="line"><a name="l13334"></a><span class="lineno">13334</span>&#160; out:</div>
<div class="line"><a name="l13335"></a><span class="lineno">13335</span>&#160;  dout(10) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; c-&gt;get_cid() &lt;&lt; <span class="stringliteral">&quot; oid &quot;</span> &lt;&lt; oid &lt;&lt; <span class="stringliteral">&quot; = &quot;</span> &lt;&lt; r</div>
<div class="line"><a name="l13336"></a><span class="lineno">13336</span>&#160;       &lt;&lt; dendl;</div>
<div class="line"><a name="l13337"></a><span class="lineno">13337</span>&#160;  <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l13338"></a><span class="lineno">13338</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac29ab0a01aa5bb4631a612be9c402918"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac29ab0a01aa5bb4631a612be9c402918">&#9670;&nbsp;</a></span>omap_get()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int BlueStore::omap_get </td>
          <td>(</td>
          <td class="paramtype">CollectionHandle &amp;&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ghobject_t &amp;&#160;</td>
          <td class="paramname"><em>oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ceph::buffer::list *&#160;</td>
          <td class="paramname"><em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; std::string, ceph::buffer::list &gt; *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">c</td><td><a class="el" href="structBlueStore_1_1Collection.html">Collection</a> containing oid </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">oid</td><td>Object containing omap </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">header</td><td>omap header </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">out</td><td>&lt; [out] Key to value map </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BlueStore_8cc_source.html#l13034">13034</a> of file <a class="el" href="BlueStore_8cc_source.html">BlueStore.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l13040"></a><span class="lineno">13040</span>&#160;{</div>
<div class="line"><a name="l13041"></a><span class="lineno">13041</span>&#160;  Collection *c = <span class="keyword">static_cast&lt;</span>Collection *<span class="keyword">&gt;</span>(c_.get());</div>
<div class="line"><a name="l13042"></a><span class="lineno">13042</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classBlueStore.html#ad9e79ac5d14d9d251ea24383f225b396">_omap_get</a>(c, oid, header, out);</div>
<div class="line"><a name="l13043"></a><span class="lineno">13043</span>&#160;}</div>
<div class="ttc" id="aclassBlueStore_html_ad9e79ac5d14d9d251ea24383f225b396"><div class="ttname"><a href="classBlueStore.html#ad9e79ac5d14d9d251ea24383f225b396">BlueStore::_omap_get</a></div><div class="ttdeci">int _omap_get(Collection *c, const ghobject_t &amp;oid, ceph::buffer::list *header, std::map&lt; std::string, ceph::buffer::list &gt; *out)</div><div class="ttdef"><b>Definition:</b> <a href="BlueStore_8cc_source.html#l13045">BlueStore.cc:13045</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a73722d8f1ec6772716aa9f1a4458cdd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73722d8f1ec6772716aa9f1a4458cdd2">&#9670;&nbsp;</a></span>omap_get_header()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int BlueStore::omap_get_header </td>
          <td>(</td>
          <td class="paramtype">CollectionHandle &amp;&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ghobject_t &amp;&#160;</td>
          <td class="paramname"><em>oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ceph::buffer::list *&#160;</td>
          <td class="paramname"><em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allow_eio</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get omap header. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">c</td><td><a class="el" href="structBlueStore_1_1Collection.html">Collection</a> containing oid </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">oid</td><td>Object containing omap </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">header</td><td>omap header </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">allow_eio</td><td>don't assert on eio </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BlueStore_8cc_source.html#l13111">13111</a> of file <a class="el" href="BlueStore_8cc_source.html">BlueStore.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l13117"></a><span class="lineno">13117</span>&#160;{</div>
<div class="line"><a name="l13118"></a><span class="lineno">13118</span>&#160;  Collection *c = <span class="keyword">static_cast&lt;</span>Collection *<span class="keyword">&gt;</span>(c_.get());</div>
<div class="line"><a name="l13119"></a><span class="lineno">13119</span>&#160;  dout(15) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; c-&gt;get_cid() &lt;&lt; <span class="stringliteral">&quot; oid &quot;</span> &lt;&lt; oid &lt;&lt; dendl;</div>
<div class="line"><a name="l13120"></a><span class="lineno">13120</span>&#160;  <span class="keywordflow">if</span> (!c-&gt;exists)</div>
<div class="line"><a name="l13121"></a><span class="lineno">13121</span>&#160;    <span class="keywordflow">return</span> -ENOENT;</div>
<div class="line"><a name="l13122"></a><span class="lineno">13122</span>&#160;  std::shared_lock l(c-&gt;lock);</div>
<div class="line"><a name="l13123"></a><span class="lineno">13123</span>&#160;  <span class="keywordtype">int</span> r = 0;</div>
<div class="line"><a name="l13124"></a><span class="lineno">13124</span>&#160;  OnodeRef o = c-&gt;get_onode(oid, <span class="keyword">false</span>);</div>
<div class="line"><a name="l13125"></a><span class="lineno">13125</span>&#160;  <span class="keywordflow">if</span> (!o || !o-&gt;exists) {</div>
<div class="line"><a name="l13126"></a><span class="lineno">13126</span>&#160;    r = -ENOENT;</div>
<div class="line"><a name="l13127"></a><span class="lineno">13127</span>&#160;    <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l13128"></a><span class="lineno">13128</span>&#160;  }</div>
<div class="line"><a name="l13129"></a><span class="lineno">13129</span>&#160;  <span class="keywordflow">if</span> (!o-&gt;onode.has_omap())</div>
<div class="line"><a name="l13130"></a><span class="lineno">13130</span>&#160;    <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l13131"></a><span class="lineno">13131</span>&#160;  o-&gt;flush();</div>
<div class="line"><a name="l13132"></a><span class="lineno">13132</span>&#160;  {</div>
<div class="line"><a name="l13133"></a><span class="lineno">13133</span>&#160;    <span class="keywordtype">string</span> head;</div>
<div class="line"><a name="l13134"></a><span class="lineno">13134</span>&#160;    o-&gt;get_omap_header(&amp;head);</div>
<div class="line"><a name="l13135"></a><span class="lineno">13135</span>&#160;    <span class="keywordflow">if</span> (db-&gt;get(o-&gt;get_omap_prefix(), head, header) &gt;= 0) {</div>
<div class="line"><a name="l13136"></a><span class="lineno">13136</span>&#160;      dout(30) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;  got header&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a name="l13137"></a><span class="lineno">13137</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l13138"></a><span class="lineno">13138</span>&#160;      dout(30) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;  no header&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a name="l13139"></a><span class="lineno">13139</span>&#160;    }</div>
<div class="line"><a name="l13140"></a><span class="lineno">13140</span>&#160;  }</div>
<div class="line"><a name="l13141"></a><span class="lineno">13141</span>&#160; out:</div>
<div class="line"><a name="l13142"></a><span class="lineno">13142</span>&#160;  dout(10) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; c-&gt;get_cid() &lt;&lt; <span class="stringliteral">&quot; oid &quot;</span> &lt;&lt; oid &lt;&lt; <span class="stringliteral">&quot; = &quot;</span> &lt;&lt; r</div>
<div class="line"><a name="l13143"></a><span class="lineno">13143</span>&#160;       &lt;&lt; dendl;</div>
<div class="line"><a name="l13144"></a><span class="lineno">13144</span>&#160;  <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l13145"></a><span class="lineno">13145</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a108a18f1b84ccfae1bc5bf03ab4c465e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a108a18f1b84ccfae1bc5bf03ab4c465e">&#9670;&nbsp;</a></span>omap_get_keys()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int BlueStore::omap_get_keys </td>
          <td>(</td>
          <td class="paramtype">CollectionHandle &amp;&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ghobject_t &amp;&#160;</td>
          <td class="paramname"><em>oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::set&lt; std::string &gt; *&#160;</td>
          <td class="paramname"><em>keys</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get keys defined on oid. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">c</td><td><a class="el" href="structBlueStore_1_1Collection.html">Collection</a> containing oid </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">oid</td><td>Object containing omap </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">keys</td><td>Keys defined on oid </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BlueStore_8cc_source.html#l13147">13147</a> of file <a class="el" href="BlueStore_8cc_source.html">BlueStore.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l13152"></a><span class="lineno">13152</span>&#160;{</div>
<div class="line"><a name="l13153"></a><span class="lineno">13153</span>&#160;  Collection *c = <span class="keyword">static_cast&lt;</span>Collection *<span class="keyword">&gt;</span>(c_.get());</div>
<div class="line"><a name="l13154"></a><span class="lineno">13154</span>&#160;  dout(15) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; c-&gt;get_cid() &lt;&lt; <span class="stringliteral">&quot; oid &quot;</span> &lt;&lt; oid &lt;&lt; dendl;</div>
<div class="line"><a name="l13155"></a><span class="lineno">13155</span>&#160;  <span class="keywordflow">if</span> (!c-&gt;exists)</div>
<div class="line"><a name="l13156"></a><span class="lineno">13156</span>&#160;    <span class="keywordflow">return</span> -ENOENT;</div>
<div class="line"><a name="l13157"></a><span class="lineno">13157</span>&#160;  <span class="keyword">auto</span> start1 = mono_clock::now();</div>
<div class="line"><a name="l13158"></a><span class="lineno">13158</span>&#160;  std::shared_lock l(c-&gt;lock);</div>
<div class="line"><a name="l13159"></a><span class="lineno">13159</span>&#160;  <span class="keywordtype">int</span> r = 0;</div>
<div class="line"><a name="l13160"></a><span class="lineno">13160</span>&#160;  OnodeRef o = c-&gt;get_onode(oid, <span class="keyword">false</span>);</div>
<div class="line"><a name="l13161"></a><span class="lineno">13161</span>&#160;  <span class="keywordflow">if</span> (!o || !o-&gt;exists) {</div>
<div class="line"><a name="l13162"></a><span class="lineno">13162</span>&#160;    r = -ENOENT;</div>
<div class="line"><a name="l13163"></a><span class="lineno">13163</span>&#160;    <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l13164"></a><span class="lineno">13164</span>&#160;  }</div>
<div class="line"><a name="l13165"></a><span class="lineno">13165</span>&#160;  <span class="keywordflow">if</span> (!o-&gt;onode.has_omap())</div>
<div class="line"><a name="l13166"></a><span class="lineno">13166</span>&#160;    <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l13167"></a><span class="lineno">13167</span>&#160;  o-&gt;flush();</div>
<div class="line"><a name="l13168"></a><span class="lineno">13168</span>&#160;  {</div>
<div class="line"><a name="l13169"></a><span class="lineno">13169</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; prefix = o-&gt;get_omap_prefix();</div>
<div class="line"><a name="l13170"></a><span class="lineno">13170</span>&#160;    <span class="keywordtype">string</span> head, tail;</div>
<div class="line"><a name="l13171"></a><span class="lineno">13171</span>&#160;    o-&gt;get_omap_key(<span class="keywordtype">string</span>(), &amp;head);</div>
<div class="line"><a name="l13172"></a><span class="lineno">13172</span>&#160;    o-&gt;get_omap_tail(&amp;tail);</div>
<div class="line"><a name="l13173"></a><span class="lineno">13173</span>&#160;    KeyValueDB::Iterator it = db-&gt;get_iterator(prefix, 0, KeyValueDB::IteratorBounds{head, tail});</div>
<div class="line"><a name="l13174"></a><span class="lineno">13174</span>&#160;    it-&gt;lower_bound(head);</div>
<div class="line"><a name="l13175"></a><span class="lineno">13175</span>&#160;    <span class="keywordflow">while</span> (it-&gt;valid()) {</div>
<div class="line"><a name="l13176"></a><span class="lineno">13176</span>&#160;      <span class="keywordflow">if</span> (it-&gt;key() &gt;= tail) {</div>
<div class="line"><a name="l13177"></a><span class="lineno">13177</span>&#160;    dout(30) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;  reached tail&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a name="l13178"></a><span class="lineno">13178</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l13179"></a><span class="lineno">13179</span>&#160;      }</div>
<div class="line"><a name="l13180"></a><span class="lineno">13180</span>&#160;      <span class="keywordtype">string</span> user_key;</div>
<div class="line"><a name="l13181"></a><span class="lineno">13181</span>&#160;      o-&gt;decode_omap_key(it-&gt;key(), &amp;user_key);</div>
<div class="line"><a name="l13182"></a><span class="lineno">13182</span>&#160;      dout(20) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;  got &quot;</span> &lt;&lt; pretty_binary_string(it-&gt;key())</div>
<div class="line"><a name="l13183"></a><span class="lineno">13183</span>&#160;           &lt;&lt; <span class="stringliteral">&quot; -&gt; &quot;</span> &lt;&lt; user_key &lt;&lt; dendl;</div>
<div class="line"><a name="l13184"></a><span class="lineno">13184</span>&#160;      keys-&gt;insert(user_key);</div>
<div class="line"><a name="l13185"></a><span class="lineno">13185</span>&#160;      it-&gt;next();</div>
<div class="line"><a name="l13186"></a><span class="lineno">13186</span>&#160;    }</div>
<div class="line"><a name="l13187"></a><span class="lineno">13187</span>&#160;  }</div>
<div class="line"><a name="l13188"></a><span class="lineno">13188</span>&#160; out:</div>
<div class="line"><a name="l13189"></a><span class="lineno">13189</span>&#160;  c-&gt;store-&gt;log_latency(</div>
<div class="line"><a name="l13190"></a><span class="lineno">13190</span>&#160;    __func__,</div>
<div class="line"><a name="l13191"></a><span class="lineno">13191</span>&#160;    l_bluestore_omap_get_keys_lat,</div>
<div class="line"><a name="l13192"></a><span class="lineno">13192</span>&#160;    mono_clock::now() - start1,</div>
<div class="line"><a name="l13193"></a><span class="lineno">13193</span>&#160;    c-&gt;store-&gt;cct-&gt;_conf-&gt;bluestore_log_omap_iterator_age);</div>
<div class="line"><a name="l13194"></a><span class="lineno">13194</span>&#160; </div>
<div class="line"><a name="l13195"></a><span class="lineno">13195</span>&#160;  dout(10) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; c-&gt;get_cid() &lt;&lt; <span class="stringliteral">&quot; oid &quot;</span> &lt;&lt; oid &lt;&lt; <span class="stringliteral">&quot; = &quot;</span> &lt;&lt; r</div>
<div class="line"><a name="l13196"></a><span class="lineno">13196</span>&#160;       &lt;&lt; dendl;</div>
<div class="line"><a name="l13197"></a><span class="lineno">13197</span>&#160;  <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l13198"></a><span class="lineno">13198</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab5314c900054ea2d0e5780f9353f04e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5314c900054ea2d0e5780f9353f04e7">&#9670;&nbsp;</a></span>omap_get_values()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int BlueStore::omap_get_values </td>
          <td>(</td>
          <td class="paramtype">CollectionHandle &amp;&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ghobject_t &amp;&#160;</td>
          <td class="paramname"><em>oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::set&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>keys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; std::string, ceph::buffer::list &gt; *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get key values. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">c</td><td><a class="el" href="structBlueStore_1_1Collection.html">Collection</a> containing oid </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">oid</td><td>Object containing omap </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">keys</td><td>Keys to get </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out</td><td>Returned keys and values </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="BlueStore_8cc_source.html#l13200">13200</a> of file <a class="el" href="BlueStore_8cc_source.html">BlueStore.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l13206"></a><span class="lineno">13206</span>&#160;{</div>
<div class="line"><a name="l13207"></a><span class="lineno">13207</span>&#160;  Collection *c = <span class="keyword">static_cast&lt;</span>Collection *<span class="keyword">&gt;</span>(c_.get());</div>
<div class="line"><a name="l13208"></a><span class="lineno">13208</span>&#160;  dout(15) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; c-&gt;get_cid() &lt;&lt; <span class="stringliteral">&quot; oid &quot;</span> &lt;&lt; oid &lt;&lt; dendl;</div>
<div class="line"><a name="l13209"></a><span class="lineno">13209</span>&#160;  <span class="keywordflow">if</span> (!c-&gt;exists)</div>
<div class="line"><a name="l13210"></a><span class="lineno">13210</span>&#160;    <span class="keywordflow">return</span> -ENOENT;</div>
<div class="line"><a name="l13211"></a><span class="lineno">13211</span>&#160;  std::shared_lock l(c-&gt;lock);</div>
<div class="line"><a name="l13212"></a><span class="lineno">13212</span>&#160;  <span class="keyword">auto</span> start1 = mono_clock::now();</div>
<div class="line"><a name="l13213"></a><span class="lineno">13213</span>&#160;  <span class="keywordtype">int</span> r = 0;</div>
<div class="line"><a name="l13214"></a><span class="lineno">13214</span>&#160;  <span class="keywordtype">string</span> final_key;</div>
<div class="line"><a name="l13215"></a><span class="lineno">13215</span>&#160;  OnodeRef o = c-&gt;get_onode(oid, <span class="keyword">false</span>);</div>
<div class="line"><a name="l13216"></a><span class="lineno">13216</span>&#160;  <span class="keywordflow">if</span> (!o || !o-&gt;exists) {</div>
<div class="line"><a name="l13217"></a><span class="lineno">13217</span>&#160;    r = -ENOENT;</div>
<div class="line"><a name="l13218"></a><span class="lineno">13218</span>&#160;    <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l13219"></a><span class="lineno">13219</span>&#160;  }</div>
<div class="line"><a name="l13220"></a><span class="lineno">13220</span>&#160;  <span class="keywordflow">if</span> (!o-&gt;onode.has_omap()) {</div>
<div class="line"><a name="l13221"></a><span class="lineno">13221</span>&#160;    <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l13222"></a><span class="lineno">13222</span>&#160;  }</div>
<div class="line"><a name="l13223"></a><span class="lineno">13223</span>&#160;  o-&gt;flush();</div>
<div class="line"><a name="l13224"></a><span class="lineno">13224</span>&#160;  {</div>
<div class="line"><a name="l13225"></a><span class="lineno">13225</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; prefix = o-&gt;get_omap_prefix();</div>
<div class="line"><a name="l13226"></a><span class="lineno">13226</span>&#160;    o-&gt;get_omap_key(<span class="keywordtype">string</span>(), &amp;final_key);</div>
<div class="line"><a name="l13227"></a><span class="lineno">13227</span>&#160;    <span class="keywordtype">size_t</span> base_key_len = final_key.size();</div>
<div class="line"><a name="l13228"></a><span class="lineno">13228</span>&#160;    <span class="keywordflow">for</span> (set&lt;string&gt;::const_iterator p = keys.begin(); p != keys.end(); ++p) {</div>
<div class="line"><a name="l13229"></a><span class="lineno">13229</span>&#160;      final_key.resize(base_key_len); <span class="comment">// keep prefix</span></div>
<div class="line"><a name="l13230"></a><span class="lineno">13230</span>&#160;      final_key += *p;</div>
<div class="line"><a name="l13231"></a><span class="lineno">13231</span>&#160;      bufferlist val;</div>
<div class="line"><a name="l13232"></a><span class="lineno">13232</span>&#160;      <span class="keywordflow">if</span> (db-&gt;get(prefix, final_key, &amp;val) &gt;= 0) {</div>
<div class="line"><a name="l13233"></a><span class="lineno">13233</span>&#160;    dout(30) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;  got &quot;</span> &lt;&lt; pretty_binary_string(final_key)</div>
<div class="line"><a name="l13234"></a><span class="lineno">13234</span>&#160;         &lt;&lt; <span class="stringliteral">&quot; -&gt; &quot;</span> &lt;&lt; *p &lt;&lt; dendl;</div>
<div class="line"><a name="l13235"></a><span class="lineno">13235</span>&#160;    out-&gt;insert(make_pair(*p, val));</div>
<div class="line"><a name="l13236"></a><span class="lineno">13236</span>&#160;      }</div>
<div class="line"><a name="l13237"></a><span class="lineno">13237</span>&#160;    }</div>
<div class="line"><a name="l13238"></a><span class="lineno">13238</span>&#160;  }</div>
<div class="line"><a name="l13239"></a><span class="lineno">13239</span>&#160; out:</div>
<div class="line"><a name="l13240"></a><span class="lineno">13240</span>&#160;  c-&gt;store-&gt;log_latency(</div>
<div class="line"><a name="l13241"></a><span class="lineno">13241</span>&#160;    __func__,</div>
<div class="line"><a name="l13242"></a><span class="lineno">13242</span>&#160;    l_bluestore_omap_get_values_lat,</div>
<div class="line"><a name="l13243"></a><span class="lineno">13243</span>&#160;    mono_clock::now() - start1,</div>
<div class="line"><a name="l13244"></a><span class="lineno">13244</span>&#160;    c-&gt;store-&gt;cct-&gt;_conf-&gt;bluestore_log_omap_iterator_age);</div>
<div class="line"><a name="l13245"></a><span class="lineno">13245</span>&#160; </div>
<div class="line"><a name="l13246"></a><span class="lineno">13246</span>&#160;  dout(10) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; c-&gt;get_cid() &lt;&lt; <span class="stringliteral">&quot; oid &quot;</span> &lt;&lt; oid &lt;&lt; <span class="stringliteral">&quot; = &quot;</span> &lt;&lt; r</div>
<div class="line"><a name="l13247"></a><span class="lineno">13247</span>&#160;       &lt;&lt; dendl;</div>
<div class="line"><a name="l13248"></a><span class="lineno">13248</span>&#160;  <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l13249"></a><span class="lineno">13249</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="BlueStore_8h_source.html">BlueStore.h</a></li>
<li><a class="el" href="BlueStore_8cc_source.html">BlueStore.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
